<!DOCTYPE html>

<html lang="en-US">
<head>
<meta charset="utf-8"/>
<title>Bar Harbor ME Parking: Permits, Rates, & Enforcement | BHPD</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta name="description" content="Official Bar Harbor parking guide with interactive map: click to navigate parking lots ($2-$4/hr), Ferry Terminal free parking, EV charging, RV spaces, ParkMobile app. Real-time directions for Acadia visitors.">
<link rel="canonical" href="https://www.bhmdpd.com/bar-harbor-parking.html" />

<!-- Primary Meta Tags -->
<meta name="title" content="Bar Harbor ME Parking: Permits, Rates, & Enforcement | BHPD">
<meta name="keywords" content="Bar Harbor parking, interactive parking map, clickable parking locations, Ferry Terminal parking Eden Street, EV charging stations Bar Harbor, RV parking Maine, Athletic Field parking, ParkMobile Bar Harbor, Acadia National Park parking, downtown Bar Harbor parking lots, Maine parking rates, tourist parking Bar Harbor, Bar Harbor ferry parking, electric vehicle charging, large vehicle parking, grants park parking shore path, Bar Harbor parking map, interactive map navigation, real-time directions, seasonal parking permits, kiosk payments, Maine parking enforcement, Leaflet map, GPS parking coordinates">
<meta name="author" content="Bar Harbor Mount Desert Police Department">
<meta name="robots" content="index, follow">

<!-- Geolocation Metadata -->
<meta name="geo.region" content="US-ME">
<meta name="geo.placename" content="Bar Harbor">
<meta name="geo.position" content="44.3876;-68.2039">
<meta name="ICBM" content="44.3876, -68.2039">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:url" content="https://www.bhmdpd.com/bar-harbor-parking.html">
<meta property="og:title" content="Bar Harbor ME Parking: Permits, Rates, & Enforcement | BHPD">
<meta property="og:description" content="Complete Bar Harbor parking guide with interactive map: click to navigate to parking lots, Ferry Terminal free parking, EV charging stations, RV spaces, downtown lots, ParkMobile app. Perfect for Acadia National Park visitors.">
<meta property="og:image" content="https://www.bhmdpd.com/images/divisions/parking/parkingmap.jpg">

<!-- Twitter -->
<meta property="twitter:card" content="summary_large_image">
<meta property="twitter:url" content="https://www.bhmdpd.com/bar-harbor-parking.html">
<meta property="twitter:title" content="Bar Harbor ME Parking: Permits, Rates, & Enforcement | BHPD">
<meta property="twitter:description" content="Bar Harbor parking guide with interactive map: click to navigate parking lots, Ferry Terminal free parking, EV charging, RV spaces, downtown lots ($2-$4/hr), ParkMobile app for Acadia visitors.">
<meta property="twitter:image" content="https://www.bhmdpd.com/images/divisions/parking/parkingmap.jpg">

<!-- Schema.org JSON-LD -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "GovernmentService",
  "name": "Bar Harbor Parking Program",
  "serviceType": ["Parking Enforcement & Permits", "Electric Vehicle Charging", "Ferry Terminal Parking", "Mobile Payment Services", "RV/Large Vehicle Parking"],
  "provider": {
    "@type": "GovernmentOrganization",
    "name": "Bar Harbor Mount Desert Police Department",
    "telephone": "+12072881777",
    "address": {
      "@type": "PostalAddress",
      "streetAddress": "37 Firefly Lane",
      "addressLocality": "Bar Harbor",
      "addressRegion": "ME",
      "postalCode": "04609",
      "addressCountry": "US"
    }
  },
  "areaServed": {
    "@type": "City",
    "name": "Bar Harbor",
    "geo": {
      "@type": "GeoCoordinates",
      "latitude": 44.3876,
      "longitude": -68.2039
    }
  },
  "availableChannel": {
    "@type": "ServiceChannel",
    "serviceUrl": "https://www.thepermitportal.com",
    "servicePhone": "+12072881777"
  },
  "serviceOperator": {
    "@type": "GovernmentOrganization",
    "name": "Bar Harbor Mount Desert Police Department"
  },
  "termsOfService": "https://www.barharbormaine.gov/DocumentCenter/View/3156/Permit-and-Paid-Parking-Policy",
  "hoursAvailable": [
    {
      "@type": "OpeningHoursSpecification",
      "dayOfWeek": [
        "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"
      ],
      "opens": "08:00",
      "closes": "21:00",
      "validFrom": "2025-05-15",
      "validThrough": "2025-10-30"
    },
    {
      "@type": "OpeningHoursSpecification",
      "dayOfWeek": "Sunday",
      "opens": "12:00",
      "closes": "21:00",
      "validFrom": "2025-05-15",
      "validThrough": "2025-10-30"
    }
  ],
  "description": "Complete Bar Harbor parking services including downtown lots, Ferry Terminal free parking, EV charging stations, RV spaces, mobile payments via ParkMobile app, and permit services for residents and Acadia National Park visitors.",
  "potentialAction": [
    {
      "@type": "ViewAction",
      "name": "Download Parking Map",
      "target": {
        "@type": "EntryPoint",
        "urlTemplate": "https://www.bhmdpd.com/images/divisions/parking/parkingmap.pdf",
        "encodingType": "application/pdf"
      }
    },
    {
      "@type": "ViewAction", 
      "name": "Access ParkMobile App",
      "target": {
        "@type": "EntryPoint",
        "urlTemplate": "https://parkmobile.io/",
        "actionPlatform": [
          "http://schema.org/IOSPlatform",
          "http://schema.org/AndroidPlatform"
        ]
      }
    },
    {
      "@type": "ViewAction",
      "name": "View Ferry Terminal Parking",
      "target": {
        "@type": "EntryPoint", 
        "urlTemplate": "https://www.bhmdpd.com/bar-harbor-parking.html#lots"
      }
    }
  ]
}
</script>

<!-- Additional Schema.org for Interactive Parking Map -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": "Bar Harbor Interactive Parking Map",
  "description": "Interactive map showing all Bar Harbor parking locations with clickable navigation, real-time directions, and pricing information",
  "url": "https://www.bhmdpd.com/bar-harbor-parking.html",
  "applicationCategory": "UtilityApplication",
  "operatingSystem": "All",
  "permissions": "location",
  "featureList": [
    "Interactive parking lot map",
    "Clickable marker navigation", 
    "Real-time GPS directions",
    "Parking rate information",
    "Mobile-friendly interface",
    "EV charging station locations",
    "RV parking designation"
  ],
  "provider": {
    "@type": "GovernmentOrganization", 
    "name": "Bar Harbor Mount Desert Police Department"
  }
}
</script>

<!-- Schema.org for Individual Parking Facilities -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "ItemList",
  "name": "Bar Harbor Parking Facilities",
  "description": "Complete list of parking facilities in Bar Harbor, Maine",
  "itemListElement": [
    {
      "@type": "ParkingFacility",
      "name": "Ferry Terminal Free Parking",
      "address": "121 Eden Street, Bar Harbor, ME",
      "geo": {
        "@type": "GeoCoordinates",
        "latitude": 44.397833,
        "longitude": -68.227417
      },
      "priceRange": "Free",
      "amenityFeature": ["RV Friendly", "Large Vehicle Access"]
    },
    {
      "@type": "ParkingFacility", 
      "name": "Athletic Field EV Charging",
      "geo": {
        "@type": "GeoCoordinates",
        "latitude": 44.381944,
        "longitude": -68.204778
      },
      "priceRange": "$2.00/hour",
      "amenityFeature": ["Electric Vehicle Charging", "Athletic Facility Access"]
    },
    {
      "@type": "ParkingFacility",
      "name": "Downtown Premium Parking",
      "description": "High-demand downtown locations including Casino Lot, Grants Park, Town Pier, and Upper Central",
      "priceRange": "$4.00/hour",
      "amenityFeature": ["Downtown Access", "Restaurant Proximity", "Shopping District"]
    }
  ]
}
</script>

<!-- Mobile and Responsive Tags -->
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="apple-mobile-web-app-title" content="Bar Harbor Parking Map">
<meta name="format-detection" content="telephone=no">
<meta name="theme-color" content="#1a2b4a">
<meta name="msapplication-navbutton-color" content="#1a2b4a">
<meta name="application-name" content="BHMDPD Parking">
<meta name="msapplication-TileColor" content="#2d89ef">

<!-- Availability and Data Integrity -->
<meta name="revisit-after" content="7 days">
<meta name="language" content="en-US">

<!-- Dublin Core Metadata -->
<meta name="DC.title" content="Bar Harbor ME Parking: Permits, Rates, & Enforcement">
<meta name="DC.creator" content="Bar Harbor Mount Desert Police Department">
<meta name="DC.subject" content="Bar Harbor parking, Maine parking permits, downtown Bar Harbor parking, seasonal parking, Bar Harbor parking rates, Bar Harbor parking map, Bar Harbor parking lots, Bar Harbor RV parking, Bar Harbor free parking, Bar Harbor permit system, parking enforcement, parking kiosks, ParkMobile, Mount Desert parking, Bar Harbor parking citations">
<meta name="DC.description" content="Official Bar Harbor, ME parking guide: permits, seasonal rates ($2-$4/hr, May-Oct), enforcement, kiosk/ParkMobile. Find lot locations, maps, costs & citation info.">
<meta name="DC.date" content="2025-04-16">
<meta name="DC.type" content="Text">
<meta name="DC.format" content="text/html">
<meta name="DC.identifier" content="https://www.bhmdpd.com/bar-harbor-parking.html">
<meta name="DC.language" content="en-US">
<meta name="DC.coverage" content="Bar Harbor, Maine, USA">
<meta name="DC.rights" content="Â© 2025 Bar Harbor Police Department">

<!-- Performance Optimization -->
<link rel="preconnect" href="https://cdnjs.cloudflare.com">
<link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">
<link rel="preconnect" href="https://unpkg.com" crossorigin>
<link rel="dns-prefetch" href="https://unpkg.com">
<link rel="preconnect" href="https://www.youtube.com">
<link rel="dns-prefetch" href="https://www.youtube.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<link rel="dns-prefetch" href="https://www.googletagmanager.com">

<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-3LBXVRZLEN"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-3LBXVRZLEN');
</script>

<!-- Preload Critical Resources -->
<link rel="preload" href="images/branding/logo.png" as="image">
<link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/webfonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet';this.setAttribute('data-font-display','swap')">
<noscript><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"></noscript>

<!-- Critical CSS for Above-the-Fold Content -->
<style>
  /* Critical Styles for Parking Page */
  :root {
    --header-height: 80px;
    --primary-color: #1a2b4a;
    --primary-color-light: #2a4a7a;
    --primary-color-dark: #1a2b4a;
    --light-text-color: #fff;
    --text-color: #333;
    --gray-800: #343a40;
    --accent-color: #0d47a1;
    --spacing-md: 1.5rem;
    --radius-md: 8px;
    --radius-lg: 12px;
    --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.05);
    --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.1);
    --shadow-lg: 0 8px 15px rgba(0, 0, 0, 0.1);
    --gray-100: #f1f3f4;
    --gray-200: #e8eaed;
  }
  body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif; line-height: 1.6; background-color: #f8f9fa; color: var(--text-color); font-display: swap; }
  *, *::before, *::after { box-sizing: border-box; }
  a { text-decoration: none; color: inherit; }
  img { max-width: 100%; height: auto; display: block; }
  h1 { font-size: 3.5rem; font-weight: 700; margin: 0 0 1.5rem 0; line-height: 1.1; font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Segoe UI", system-ui, sans-serif; }
  button { border: none; background: none; padding: 0; cursor: pointer; }
  ul { list-style: none; padding: 0; margin: 0; }

  /* Header Base */
  .header { position: fixed; top: 0; left: 0; width: 100%; z-index: 1000; height: var(--header-height); background: var(--light-text-color); box-shadow: var(--shadow-sm); transition: background-color 0.3s ease, box-shadow 0.3s ease; }
  .main-nav { display: flex; justify-content: space-between; align-items: center; max-width: 1400px; margin: 0 auto; padding: 0 var(--spacing-md); height: 100%; position: relative; }
  .logo-link { display: flex; align-items: center; }
  .logo { height: 60px; width: auto; transition: height 0.3s ease; }

  /* Desktop Navigation */
  .nav-wrapper { flex: 1; display: flex; justify-content: center; margin-left: 2rem; align-items: center; }
  .nav-links { display: flex; gap: 2rem; align-items: center; }
  .nav-links a { color: var(--gray-800); font-weight: 500; display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 0; font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Helvetica Neue", Arial, sans-serif; font-size: 0.95rem; position: relative; }
  .nav-links a:hover, .nav-links a.active { color: var(--accent-color); }
  .nav-links a.active::after { content: ''; position: absolute; bottom: 0; left: 0; width: 100%; height: 2px; background-color: var(--accent-color); }
  
  /* Dropdown Base */
  .dropdown { position: relative; height: 100%; display: flex; align-items: center; }
  .dropdown > a i.fa-caret-down { margin-left: 0.25rem; font-size: 0.8rem; transition: transform 0.2s ease; }
  .dropdown-content { position: absolute; top: 100%; left: 50%; min-width: 250px; background-color: white; border-radius: 12px; box-shadow: 0 4px 24px rgba(0, 0, 0, 0.08); z-index: 1000; padding: 0.5rem 0; margin-top: 8px; opacity: 0; visibility: hidden; transform: translateX(-50%) translateY(10px); transition: opacity 0.2s ease, visibility 0.2s ease, transform 0.2s ease; }
  .dropdown-content a { color: var(--text-color); display: block; padding: 0.75rem 1rem; font-size: 0.9rem; }
  .dropdown-content a i { margin-right: 0.75rem; font-size: 1rem; width: 1.25rem; text-align: center; color: var(--accent-color); }
  .dropdown:hover .dropdown-content, .dropdown.active .dropdown-content { opacity: 1; visibility: visible; transform: translateX(-50%) translateY(0); pointer-events: auto; }
  .dropdown:hover > a i.fa-caret-down, .dropdown.active > a i.fa-caret-down { transform: rotate(180deg); }
  .dropdown-content a:hover { background-color: #f8f9fa; color: var(--accent-color); }

  /* Screen Reader Only */
  .sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border: 0; }

  /* Mobile Menu Elements */
  .mobile-menu-btn { display: none; font-size: 1.5rem; color: var(--gray-800); z-index: 1002; }
  .mobile-close-btn { display: none; font-size: 1.5rem; color: var(--light-text-color); position: absolute; top: 1rem; right: 1rem; z-index: 1002; }

  /* Dark Mode Toggle */
  .dark-mode-toggle { display: flex; align-items: center; justify-content: center; margin-left: var(--spacing-md); width: 45px; height: 45px; border-radius: var(--radius-md); background: var(--gray-100); border: 2px solid var(--gray-200); color: var(--gray-800); cursor: pointer; font-size: 1.2rem; box-shadow: var(--shadow-sm); z-index: 1002; }

  /* Hero Section - Critical for LCP - Fixed dimensions to prevent layout shift */
  .hero-section, .parking-hero { margin-top: var(--header-height); padding: 4rem 0 3rem; background: radial-gradient(ellipse at center, var(--primary-color-light) 0%, var(--primary-color-dark) 100%); color: white; text-align: center; height: 420px; display: flex; align-items: center; contain: layout style; position: relative; }
  .hero-content { max-width: 900px; margin: 0 auto; padding: 0 2rem; width: 100%; height: 320px; display: flex; flex-direction: column; justify-content: center; align-items: center; position: relative; }
  .hero-icon { font-size: 5rem; color: white; margin-bottom: 1.5rem; display: block; width: 5rem; height: 5rem; line-height: 5rem; text-align: center; flex-shrink: 0; }
  .hero-section h1, .parking-hero h1 { color: white !important; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3); margin: 0 0 1.5rem 0; font-size: 3.5rem; font-weight: 800; line-height: 1.1; font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Segoe UI", system-ui, sans-serif; display: block; width: 100%; font-display: block; letter-spacing: -0.5px; text-rendering: optimizeSpeed; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }
  .hero-section p, .parking-hero p { font-size: 1.4rem; opacity: 1; margin: 0 auto 2rem; color: rgba(255, 255, 255, 0.95); line-height: 2rem; display: block; width: 100%; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); }
  .highlight-badges { display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; margin-top: 2rem; min-height: 52px; contain: layout; width: 100%; }
  .badge { background: rgba(255, 255, 255, 0.2); padding: 0.75rem 1.25rem; border-radius: 25px; color: white; font-size: 1rem; height: 48px; display: flex; align-items: center; white-space: nowrap; flex-shrink: 0; backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.3); }
  .badge i { color: white !important; opacity: 1 !important; margin-right: 0.5rem; font-size: 1.1rem; filter: drop-shadow(0 0 2px rgba(0, 0, 0, 0.5)); }

  /* Content wrapper */
  .content-wrapper { max-width: 1200px; margin: 0 auto; padding: 0 2rem; }
  
  /* Image containers to prevent layout shift */
  .parking-map-image { width: 100%; height: auto; max-width: 750px; display: block; margin: 0 auto; aspect-ratio: 600/463; }
  .map-image-container { margin: 2rem 0; text-align: center; }
  
  /* Optimize large images for faster loading */
  .parking-map-image { 
    background: #f0f0f0; /* Placeholder while loading */
    border: 1px solid #ddd;
    border-radius: 8px;
  }
  .qr-code { width: 125px; height: 125px; display: block; }
  
  /* Tab and content containers */
  .tabs-section { margin: 2rem 0; position: relative; z-index: 10; background: white; }
  .container { max-width: 1200px; margin: 0 auto; padding: 0 2rem; }
  
  /* Fix tabs to prevent layout shifts - Use display none/block instead of absolute positioning */
  .modern-tabs { display: flex; gap: 1rem; margin-bottom: 2rem; min-height: 50px; flex-wrap: wrap; contain: layout; }
  .tab-button { min-height: 44px; padding: 0.75rem 1.5rem; border: none; background: #f8f9fa; color: #333; cursor: pointer; border-radius: 5px; transition: background-color 0.2s, transform 0.2s; display: flex; align-items: center; gap: 0.5rem; flex-shrink: 0; }
  .tab-button span { display: inline-block; }
  .tab-button i { width: 1.2rem; height: 1.2rem; display: inline-flex; align-items: center; justify-content: center; }
  .tab-button.active { background: var(--accent-color); color: white; }
  .tab-contents { min-height: auto; contain: layout style; }
  .tab-content { display: none; padding: 1rem 0; contain: layout style; }
  .tab-content.active { display: block; }
  
  /* Ensure consistent spacing for all tab content */
  .tab-content { min-height: 300px; }
  .tab-content .info-card { margin-bottom: 2rem; }
  .tab-content h2 { margin: 0 0 1rem 0; }

  /* Parking Zones Organization */
  .parking-zones-container { margin: 2rem 0; }
  .zone-section { margin-bottom: 3rem; }
  .zone-header { margin-bottom: 1.5rem; padding: 1.5rem; background: linear-gradient(135deg, var(--primary-color-light), var(--primary-color-dark)); color: white; border-radius: var(--radius-lg); }
  .zone-header h3 { margin: 0 0 0.5rem 0; font-size: 1.4rem; color: #ffffff; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7); font-weight: 700; }
  .zone-header h3 i { color: #ffffff; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7); margin-right: 0.5rem; }
  .zone-description { margin: 0; opacity: 1; font-size: 1rem; color: rgba(255, 255, 255, 0.95); text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); }
  .permit-card.premium .price-tag.premium { background: linear-gradient(135deg, #f39c12, #e67e22); }
  .permit-card.standard .price-tag.standard { background: linear-gradient(135deg, #27ae60, #2ecc71); }
  .permit-card.specialty .price-tag.specialty { background: linear-gradient(135deg, #9b59b6, #8e44ad); }
  .ev-badge, .rv-badge { background: rgba(0,0,0,0.1); padding: 0.2rem 0.5rem; border-radius: 12px; font-size: 0.8rem; margin-left: 0.5rem; }
  .permit-card { border-left: 4px solid transparent; }
  .permit-card.premium { border-left-color: #f39c12; }
  .permit-card.standard { border-left-color: #27ae60; }
  .permit-card.specialty { border-left-color: #9b59b6; }

  /* Enhanced Seasonal Tab Styles */
  .seasonal-hero { background: linear-gradient(135deg, var(--primary-color-light), var(--primary-color-dark)); color: white; padding: 2rem; border-radius: var(--radius-lg); margin-bottom: 2rem; text-align: center; }
  .seasonal-hero h2 { margin: 0 0 0.5rem 0; font-size: 2rem; color: #ffffff; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7); font-weight: 700; }
  .seasonal-hero h2 i { color: #ffffff; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7); margin-right: 0.5rem; }
  .seasonal-subtitle { margin: 0; opacity: 1; font-size: 1.1rem; color: rgba(255, 255, 255, 0.95); text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); }
  .seasons-container { display: grid; gap: 2rem; }
  .season-card { background: white; border-radius: var(--radius-lg); box-shadow: var(--shadow-lg); overflow: hidden; border: 1px solid #e0e0e0; }
  .season-card-header { display: flex; align-items: center; padding: 1.5rem; gap: 1rem; border-bottom: 1px solid #f0f0f0; }
  .season-icon-container { width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
  .summer-season .season-icon-container { background: linear-gradient(135deg, #f39c12, #e67e22); }
  .winter-season .season-icon-container { background: linear-gradient(135deg, #3498db, #2980b9); }
  .season-icon { font-size: 1.5rem; color: white; }
  .season-info { flex: 1; }
  .season-info h3 { margin: 0 0 0.5rem 0; font-size: 1.4rem; color: #333; }
  .season-dates { display: flex; align-items: center; gap: 0.5rem; color: #444; font-size: 0.9rem; }
  .season-status { padding: 0.5rem 1rem; border-radius: 20px; font-size: 0.85rem; font-weight: 600; }
  .season-status.active { background: #fff3cd; color: #856404; }
  .season-status.free { background: #d1edff; color: #0c5460; }
  .season-card-body { padding: 1.5rem; }
  .rates-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1.5rem; }
  .rate-item { display: flex; gap: 1rem; padding: 1rem; border-radius: var(--radius-md); }
  .rate-item.premium { background: #fef9e7; border-left: 4px solid #f39c12; }
  .rate-item.standard { background: #eafaf1; border-left: 4px solid #27ae60; }
  .rate-icon { width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; }
  .rate-item.premium .rate-icon { background: #f39c12; }
  .rate-item.standard .rate-icon { background: #27ae60; }
  .rate-details h4 { margin: 0 0 0.25rem 0; font-size: 1rem; }
  .rate-price { font-size: 1.2rem; font-weight: 700; color: #333; margin-bottom: 0.25rem; }
  .rate-details p { margin: 0; font-size: 0.85rem; color: #444; }
  .hours-info h4 { margin: 0 0 1rem 0; color: #333; }
  .hours-grid { display: grid; gap: 0.5rem; }
  .hours-item { display: flex; justify-content: space-between; padding: 0.5rem; background: #f8f9fa; border-radius: var(--radius-md); }
  .winter-benefits { display: grid; gap: 1rem; margin-bottom: 1.5rem; }
  .benefit-item { display: flex; gap: 1rem; padding: 1rem; background: #f0f8ff; border-radius: var(--radius-md); border-left: 4px solid #3498db; }
  .benefit-icon { width: 40px; height: 40px; border-radius: 50%; background: #3498db; color: white; display: flex; align-items: center; justify-content: center; }
  .benefit-content h4 { margin: 0 0 0.25rem 0; }
  .benefit-content p { margin: 0; color: #444; font-size: 0.9rem; }
  .btn-winter { background: linear-gradient(135deg, #3498db, #2980b9); color: white; border: none; padding: 0.75rem 1.5rem; border-radius: var(--radius-md); font-weight: 600; }
  
  /* Contractor Permits Section */
  .contractor-permits-section { margin-top: 3rem; }
  .permits-hero { background: linear-gradient(135deg, #6c757d, #495057); color: white; padding: 2rem; border-radius: var(--radius-lg); text-align: center; margin-bottom: 2rem; }
  .permits-hero h3 { margin: 0 0 0.5rem 0; font-size: 1.5rem; color: #ffffff; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7); font-weight: 700; }
  .permits-hero h3 i { color: #ffffff; text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7); margin-right: 0.5rem; }
  .permits-hero p { margin: 0; opacity: 1; color: rgba(255, 255, 255, 0.95); text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); }
  .permit-options-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 2rem; }
  .permit-option { background: white; border-radius: var(--radius-lg); padding: 2rem; box-shadow: var(--shadow-md); border: 1px solid #e0e0e0; }
  .premium-option { border-left: 4px solid #f39c12; }
  .permit-option-header { text-align: center; margin-bottom: 1.5rem; }
  .permit-option-header h4 { margin: 0 0 0.5rem 0; font-size: 1.2rem; }
  .price-large { font-size: 2rem; font-weight: 700; color: var(--accent-color); }
  .price-large span { font-size: 1rem; font-weight: 400; color: #444; }
  .permit-features { list-style: none; padding: 0; margin: 0 0 1.5rem 0; }
  .permit-features li { display: flex; align-items: center; gap: 0.5rem; padding: 0.5rem 0; }
  .permit-features i { color: #27ae60; }
  .btn-full { width: 100%; justify-content: center; }
  .permit-portal-info { background: #f8f9fa; border-radius: var(--radius-lg); padding: 1.5rem; }
  .portal-card { display: flex; gap: 1.5rem; align-items: center; }
  .portal-left { flex-shrink: 0; }
  .portal-right h4 { margin: 0 0 0.5rem 0; }
  .portal-right p { margin: 0 0 1rem 0; color: #444; }
  .btn-outline { background: transparent; border: 1px solid var(--accent-color); color: var(--accent-color); }
  .btn-outline:hover { background: var(--accent-color); color: white; }
  
  @media (max-width: 768px) { 
    .rates-grid { grid-template-columns: 1fr; }
    .permit-options-grid { grid-template-columns: 1fr; }
    .portal-card { flex-direction: column; text-align: center; }
  }
  .tab-content h3 { margin: 1.5rem 0 1rem 0; }
  .tab-content p { margin: 0.5rem 0; }
  .tab-content ul { margin: 1rem 0; }
  .tab-content .btn { margin: 1rem 0; }
  
  /* Specific fixes for tabs with less content */
  #parkmobile, #lots, #citations, #seasonal { min-height: 300px; }
  
  /* Remove extra margins that create gaps */
  .modern-tabs { margin-bottom: 1rem; }
  .tab-contents { margin-top: 0; padding-top: 0; }
  
  /* Buttons and links to prevent layout shift */
  .btn { display: inline-block; min-height: 44px; line-height: 44px; padding: 0 1rem; text-align: center; }
  
  /* Prevent footer layout shift */
  .footer { margin-top: 3rem; }
  
  /* Ensure images maintain aspect ratio */
  img { height: auto; }
  
  /* Prevent content jumping when tabs load */
  .tab-hint { min-height: 40px; margin-bottom: 1rem; }
  
  /* Reserve space for common content elements */
  .parking-info, .citation-info, .permit-info { margin: 1rem 0; }
  p { margin: 0.5rem 0; }
  ul { margin: 1rem 0; }
  
  /* Hide content until tabs are initialized */
  .tab-contents:not(.initialized) .tab-content:not(.active) { display: none; }
  
  /* Optimize animations for compositing */
  * {
    will-change: auto !important;
  }
  
  .mobile-menu-btn, .mobile-close-btn, .dark-mode-toggle {
    transform: translateZ(0);
    backface-visibility: hidden;
  }
  
  /* Use transform instead of position for animations */
  .nav-wrapper {
    transform: translateX(100%);
    transition: transform 0.3s ease-in-out;
  }
  
  .nav-wrapper.active {
    transform: translateX(0);
  }
  
  /* Optimize hover states */
  .btn, .tab-button {
    transform: translateZ(0);
    transition: transform 0.2s ease, background-color 0.2s ease;
  }
  
  .btn:hover, .tab-button:hover {
    transform: translateY(-2px);
  }
  
  /* Reduce animation complexity */
  @media (prefers-reduced-motion: reduce) {
    * {
      animation-duration: 0.001ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.001ms !important;
    }
  }

  /* Skip Link */
  .skip-to-main { position: absolute; left: -999px; width: 1px; height: 1px; overflow: hidden; background-color: #007bff; color: white; padding: 10px; z-index: 9999; }
  .skip-to-main:focus { left: 10px; top: 10px; width: auto; height: auto; }

  /* Basic Font Awesome setup - Prevent icon loading shifts */
  .fas, .far, .fab { font-family: "Font Awesome 6 Free"; font-weight: 900; font-display: swap; display: inline-block; width: 1.25em; height: 1em; text-align: center; vertical-align: middle; }
  
  /* Predefine Font Awesome icon dimensions to prevent shifts */
  .hero-icon.fas::before { display: inline-block; width: 5rem; height: 5rem; line-height: 5rem; }
  .badge .fas::before { display: inline-block; width: 1em; height: 1em; }
  
  /* Video wrapper styles to fix display issues */
  .responsive-video-wrapper { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; max-width: 100%; margin: 1rem auto; background: #f0f0f0; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
  .responsive-video-wrapper iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: 0; border-radius: 8px; }
  
  /* Two column layout for tabs */
  .two-column-layout { display: grid; grid-template-columns: 1fr 1fr; gap: 3rem; margin-top: 2rem; }
  
  /* Constrain tab info cards for better contained appearance */
  #parkmobile .info-card, #kiosk .info-card, #lots .info-card, #citations .info-card, #seasonal .seasons-container { max-width: 1000px; margin: 0 auto 2rem auto; }
  
  /* Additional padding for better visual containment */
  #parkmobile .card-body, #kiosk .card-body, #lots .card-body, #citations .card-body { padding: 2rem; }
  
  /* Special containment for seasonal tab structure */
  #seasonal .seasonal-hero { max-width: 1000px; margin: 0 auto 2rem auto; padding: 2rem; }
  #seasonal .contractor-permits-section { max-width: 1000px; margin: 0 auto 2rem auto; }
  
  /* Center buttons in map download section */
  .map-image-container { text-align: center !important; }
  .map-image-container .mt-3 { text-align: center !important; }
  .map-image-container .btn { display: inline-block !important; }
  
  /* Center parking assistance contact section */
  .cta-section .cta-content { text-align: center !important; }
  .cta-section .cta-info { text-align: center !important; }
  .cta-section .contact-details { text-align: center !important; }
  .left-column, .right-column { min-height: 400px; }
  
  /* Enhanced video containers */
  .video-container-enhanced { margin-bottom: 2rem; }
  .video-caption { text-align: center; margin-top: 1rem; color: #444; font-style: italic; }
  
  /* Step items for kiosk guide */
  .step-item-vertical { display: flex; gap: 1rem; margin-bottom: 1.5rem; align-items: flex-start; }
  .step-number-circle { width: 40px; height: 40px; background: var(--accent-color); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; flex-shrink: 0; }
  .step-details h4 { margin: 0 0 0.5rem 0; color: var(--gray-800); }
  .step-details p { margin: 0; color: #444; }
  
  /* Tips grid */
  .kiosk-tips { margin-top: 3rem; padding: 2rem; background: #f8f9fa; border-radius: 8px; }
  .tips-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 1.5rem; margin-top: 1rem; }
  .tip-card { text-align: center; padding: 1.5rem; background: white; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
  .tip-card i { font-size: 2rem; color: var(--accent-color); margin-bottom: 1rem; display: block; }
  
  /* Payment info box */
  .payment-info-box { background: #e8f4f8; padding: 1.5rem; border-radius: 8px; margin-top: 2rem; }
  .payment-list { list-style: none; padding: 0; margin: 0.5rem 0 0 0; }
  .payment-list li { padding: 0.5rem 0; border-bottom: 1px solid rgba(0,0,0,0.1); }
  .payment-list li:last-child { border-bottom: none; }
  
  /* ParkMobile enhancements */
  .parkmobile-hero { margin-bottom: 2rem; }
  .lead-text { font-size: 1.2rem; color: #555; line-height: 1.6; }
  .feature-card-enhanced { display: flex; gap: 1rem; margin-bottom: 1.5rem; padding: 1rem; background: #f8f9fa; border-radius: 8px; }
  .feature-icon { width: 50px; height: 50px; background: var(--accent-color); color: white; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; flex-shrink: 0; }
  .feature-content h4 { margin: 0 0 0.3rem 0; color: var(--gray-800); }
  .feature-content p { margin: 0; color: #444; font-size: 0.95rem; }
  
  /* App store buttons */
  .app-buttons { display: flex; gap: 1rem; margin-top: 1rem; }
  .app-store-btn { display: flex; align-items: center; gap: 0.8rem; padding: 0.8rem 1.5rem; background: #000; color: white; border-radius: 8px; text-decoration: none; transition: transform 0.2s; }
  .app-store-btn.google { background: #000; }
  .app-store-btn:hover { transform: translateY(-2px); color: white; }
  .app-store-btn i { font-size: 2rem; }
  .btn-text { display: flex; flex-direction: column; align-items: flex-start; }
  .small-text { font-size: 0.75rem; opacity: 1; color: #444; }
  .main-text { font-size: 1.1rem; font-weight: 600; }
  
  /* Quick start and info boxes */
  .quick-start-guide, .zone-info-box { background: #f0f4f8; padding: 1.5rem; border-radius: 8px; margin-top: 1.5rem; }
  .numbered-list { margin: 0.5rem 0 0 1.5rem; padding: 0; }
  .numbered-list li { margin-bottom: 0.5rem; }
  
  /* Footer info */
  .parkmobile-footer { margin-top: 2rem; padding-top: 2rem; border-top: 1px solid #e0e0e0; }
  .cost-info { display: flex; align-items: center; gap: 1rem; background: #fff3cd; padding: 1rem; border-radius: 8px; }
  .cost-info i { color: #856404; font-size: 1.5rem; }
  
  /* Dark mode styles for tabs */
  body.dark-mode .step-details h4,
  body.dark-mode .step-details p,
  body.dark-mode .video-caption,
  body.dark-mode .payment-list li,
  body.dark-mode .tip-card p,
  body.dark-mode .feature-list li,
  body.dark-mode .numbered-list li,
  body.dark-mode .lead-text { color: var(--text-color) !important; }
  
  body.dark-mode .step-number-circle { background: var(--accent-color); color: white; border: 2px solid rgba(255, 255, 255, 0.2); }
  body.dark-mode .payment-info-box,
  body.dark-mode .quick-start-guide,
  body.dark-mode .zone-info-box { background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); }
  body.dark-mode .tip-card { background: rgba(255, 255, 255, 0.08); border: 1px solid rgba(255, 255, 255, 0.1); }
  body.dark-mode .feature-card-enhanced { background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); }
  body.dark-mode .feature-icon { background: var(--accent-color); border: 1px solid rgba(255, 255, 255, 0.2); }
  body.dark-mode .kiosk-tips { background: rgba(0, 0, 0, 0.3); border: 1px solid rgba(255, 255, 255, 0.1); }
  body.dark-mode .cost-info { background: rgba(255, 243, 205, 0.1); border: 1px solid rgba(255, 243, 205, 0.2); }
  body.dark-mode .cost-info p { color: #ffc107; }
  body.dark-mode .cost-info i { color: #ffc107; }
  
  /* App store buttons in dark mode */
  body.dark-mode .app-store-btn { background: #fff; color: #000; }
  body.dark-mode .app-store-btn:hover { background: #f0f0f0; color: #000; }
  body.dark-mode .app-store-btn .small-text { color: #aaa !important; }
  body.dark-mode .app-store-btn .main-text { color: #000 !important; }
  
  /* Ensure headers are visible in dark mode */
  body.dark-mode .two-column-layout h3,
  body.dark-mode .two-column-layout h4,
  body.dark-mode .kiosk-tips h3,
  body.dark-mode .download-section h4,
  body.dark-mode .feature-highlights h4 { color: var(--text-color) !important; }
  
  /* Citations Tab Styles */
  .citation-action-cards { display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 3rem; }
  .action-card { padding: 2rem; background: #f8f9fa; border-radius: 12px; text-align: center; box-shadow: 0 2px 8px rgba(0,0,0,0.08); transition: transform 0.2s; }
  .action-card:hover { transform: translateY(-4px); box-shadow: 0 4px 16px rgba(0,0,0,0.12); }
  .action-card.primary-action { background: linear-gradient(135deg, #e8f0fe 0%, #dbeafe 100%); border: 2px solid var(--accent-color); }
  .action-icon { width: 80px; height: 80px; margin: 0 auto 1.5rem; background: var(--accent-color); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 2rem; }
  .payment-note { margin-top: 1rem; padding: 0.75rem; background: rgba(0,86,179,0.1); border-radius: 8px; font-size: 0.9rem; }
  
  /* Violation Table */
  .violation-table { margin: 1.5rem 0; overflow-x: auto; }
  .styled-table { width: 100%; border-collapse: collapse; background: white; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
  .styled-table thead { background: var(--accent-color); color: white; }
  .styled-table th, .styled-table td { padding: 1rem; text-align: left; }
  .styled-table tbody tr { border-bottom: 1px solid #e0e0e0; }
  .styled-table tbody tr:hover { background: #f8f9fa; }
  .fine-note { text-align: center; color: #444; font-style: italic; margin-top: 1rem; }
  .early-payment-note { padding: 1.5rem; background: #e8f4f8; border-radius: 8px; text-align: center; margin-bottom: 2rem; }
  .early-payment-note .fine-note { margin: 0; color: var(--accent-color); font-size: 1.1rem; font-weight: 500; }
  
  /* Payment Methods */
  .payment-methods-section { margin: 3rem 0; }
  .payment-options { display: grid; grid-template-columns: repeat(3, 1fr); gap: 2rem; }
  .payment-method { padding: 1.5rem; background: #f8f9fa; border-radius: 8px; text-align: center; }
  .method-icon { width: 60px; height: 60px; margin: 0 auto 1rem; background: #e8f0fe; color: var(--accent-color); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; }
  .payment-method address { font-style: normal; margin: 1rem 0; }
  .mail-note { color: #444; font-size: 0.9rem; font-style: italic; }
  
  /* Contest Steps */
  .contest-steps { margin: 2rem 0; }
  .contest-step { display: flex; align-items: flex-start; gap: 1.5rem; margin-bottom: 2rem; padding: 1.5rem; background: #f8f9fa; border-radius: 8px; }
  .step-number-large { width: 60px; height: 60px; background: var(--accent-color); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; font-weight: bold; flex-shrink: 0; }
  .step-info h4 { margin: 0 0 0.5rem 0; color: var(--gray-800); }
  .step-info p { margin: 0; color: #444; }
  
  /* Important Info */
  .citation-footer { margin-top: 3rem; }
  .important-info { padding: 2rem; background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 8px; }
  .important-info h4 { margin: 0 0 1rem 0; color: #856404; }
  .important-info ul { margin: 0; padding-left: 1.5rem; }
  .important-info li { margin-bottom: 0.5rem; color: #856404; }
  
  /* Dark mode for citations */
  body.dark-mode .action-card { background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.15); }
  body.dark-mode .action-card.primary-action { background: rgba(0,86,179,0.2); border-color: var(--accent-color); }
  body.dark-mode .action-card h3, body.dark-mode .action-card p { color: var(--text-color) !important; }
  body.dark-mode .early-payment-note { background: rgba(0,86,179,0.15); border: 1px solid rgba(0,86,179,0.3); }
  body.dark-mode .early-payment-note .fine-note { color: #4da3ff; }
  body.dark-mode .styled-table { background: rgba(255,255,255,0.05); }
  body.dark-mode .styled-table tbody tr:hover { background: rgba(255,255,255,0.08); }
  body.dark-mode .payment-method { background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.1); }
  body.dark-mode .payment-method h4, body.dark-mode .payment-method p, body.dark-mode .payment-method li { color: var(--text-color) !important; }
  body.dark-mode .payment-method address { color: var(--text-color) !important; }
  body.dark-mode .mail-note { color: #bbb; }
  body.dark-mode .contest-step { background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.1); }
  body.dark-mode .contest-step h4, body.dark-mode .contest-step p { color: var(--text-color) !important; }
  body.dark-mode .important-info { background: rgba(255,243,205,0.15); border-color: rgba(255,243,205,0.3); }
  body.dark-mode .important-info h4, body.dark-mode .important-info li { color: #ffc107; }
  body.dark-mode .citation-info-section h3, body.dark-mode .payment-methods-section h3, body.dark-mode .contest-section h3 { color: var(--text-color) !important; }
  
  /* Dark mode for seasonal tab elements */
  body.dark-mode .season-card { background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.15); }
  body.dark-mode .season-card-body { background: transparent; }
  body.dark-mode .season-card h3, body.dark-mode .season-card h4, body.dark-mode .season-card p { color: #e0e0e0 !important; }
  body.dark-mode .rate-item { background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); }
  body.dark-mode .rate-item h4, body.dark-mode .rate-item p, body.dark-mode .rate-item span { color: #e0e0e0 !important; }
  body.dark-mode .rate-item.premium { background: rgba(0,86,179,0.2); border-color: var(--accent-color); }
  body.dark-mode .hours-item { background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.15); }
  body.dark-mode .hours-item h4, body.dark-mode .hours-item p { color: #e0e0e0 !important; }
  body.dark-mode .seasonal-hero { background: rgba(255,255,255,0.05); }
  body.dark-mode .seasonal-hero h2, body.dark-mode .seasonal-hero p { color: #e0e0e0 !important; }
  body.dark-mode .permit-option { background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.15); }
  body.dark-mode .permit-option h4, body.dark-mode .permit-option p, body.dark-mode .permit-option li { color: #e0e0e0 !important; }
  body.dark-mode .permit-option.premium-option { background: rgba(0,86,179,0.15); border-color: var(--accent-color); }
  body.dark-mode .portal-card { background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.15); }
  body.dark-mode .portal-card h4, body.dark-mode .portal-card p { color: #e0e0e0 !important; }
  body.dark-mode .benefit-content h4, body.dark-mode .benefit-content p { color: #e0e0e0 !important; }
  body.dark-mode .season-dates span, body.dark-mode .season-status { color: #e0e0e0 !important; }
  body.dark-mode .rate-price, body.dark-mode .rate-period { color: #e0e0e0 !important; }
  body.dark-mode .price-large { color: #e0e0e0 !important; }
  body.dark-mode .permit-features li { color: #e0e0e0 !important; }
  body.dark-mode .winter-benefits .benefit-content h4 { color: #e0e0e0 !important; }
  body.dark-mode .winter-benefits .benefit-content p { color: #e0e0e0 !important; }
  body.dark-mode .portal-right h4 { color: #e0e0e0 !important; }
  body.dark-mode .portal-right p { color: #e0e0e0 !important; }
  body.dark-mode .benefit-item { background: rgba(255,255,255,0.08) !important; border: 1px solid rgba(255,255,255,0.15) !important; }
  body.dark-mode .winter-benefits { background: transparent !important; }
  body.dark-mode .season-dates { color: #e0e0e0 !important; }
  body.dark-mode .season-status.active { color: #e0e0e0 !important; background: rgba(0,86,179,0.3) !important; }
  body.dark-mode .season-status.free { color: #e0e0e0 !important; background: rgba(76,175,80,0.3) !important; }
  body.dark-mode .permits-hero h3 { color: #e0e0e0 !important; }
  body.dark-mode .permits-hero p { color: #e0e0e0 !important; }
  body.dark-mode .permit-portal-info { background: transparent !important; }
  body.dark-mode .portal-card { background: rgba(255,255,255,0.08) !important; border: 1px solid rgba(255,255,255,0.15) !important; }
  body.dark-mode .portal-left { background: transparent !important; }
  body.dark-mode .portal-right { background: transparent !important; }
  
  /* Prevent accordion layout shifts */
  .accordion-item { margin-bottom: 1rem; border: 1px solid #e0e0e0; border-radius: 8px; overflow: hidden; }
  .accordion-button { width: 100%; min-height: 60px; padding: 1rem 1.5rem; background: #f8f9fa; border: none; display: flex; align-items: center; justify-content: space-between; cursor: pointer; transition: background-color 0.2s; }
  .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.3s ease; }
  .accordion-content.active { max-height: 1000px; }
  .accordion-icon { transition: transform 0.3s; }
  .accordion-button.active .accordion-icon { transform: rotate(180deg); }
  
  /* Reserve space for permit accordion */
  .permit-accordion { min-height: 400px; }
  .hidden-permits { display: none; }
  .hidden-permits.show { display: block; }
  
  /* Prevent button layout shifts */
  .show-more-permits, .show-less-permits { min-width: 200px; }
  
  /* Tab hint consistent height */
  .tab-hint { min-height: 40px; display: flex; align-items: center; justify-content: center; margin-bottom: 1rem; text-align: center; background: #e8f0fe; padding: 1rem; border-radius: 8px; border: 1px solid #d2e1f5; }
  .tab-hint p { margin: 0; color: #1a2b4a; font-size: 1.1rem; font-weight: 600; }
  .tab-hint i { color: #0d47a1; margin-right: 0.5rem; }
  
  /* Dark mode for tab hint */
  body.dark-mode .tab-hint { background: rgba(255, 255, 255, 0.1); border-color: rgba(255, 255, 255, 0.2); }
  body.dark-mode .tab-hint p { color: var(--light-text-color); }
  body.dark-mode .tab-hint i { color: #64b5f6; }
  
  /* Map preview styling */
  .map-preview { background: #f0f4f8; border: 2px solid #ddd; border-radius: 8px; padding: 2rem; text-align: center; }
  .map-preview-icon { font-size: 3rem; color: var(--accent-color); margin-bottom: 1rem; display: block; }
  .map-preview h3 { margin: 1rem 0 0.5rem 0; color: var(--gray-800); }
  .map-preview p { color: #444; }
  
  /* Dark mode for map preview */
  body.dark-mode .map-preview { background: rgba(255,255,255,0.08); border-color: rgba(255,255,255,0.2); }
  body.dark-mode .map-preview h3 { color: var(--text-color) !important; }
  body.dark-mode .map-preview p { color: var(--light-text-color) !important; opacity: 1; }
  body.dark-mode .map-preview-icon { color: #4da3ff; }
  
  /* Map Section Styling */
  .map-section { padding: 3rem 0; background: #f8f9fa; }
  .map-header { text-align: center; margin-bottom: 2rem; }
  .map-header h2 { color: #333; margin: 0 0 0.5rem 0; font-size: 2.5rem; font-weight: 700; }
  .map-header p { color: #444; font-size: 1.1rem; margin: 0; }
  
  /* Interactive Map Styling */
  .map-container { position: relative; width: 100%; z-index: 1; }
  #parking-map { 
    border: 2px solid #ddd; 
    height: 500px !important; 
    width: 100% !important; 
    min-height: 500px;
    background: #f8f9fa;
    position: relative;
    z-index: 1000 !important;
    display: block !important;
    visibility: visible !important;
    opacity: 1 !important;
  }
  
  /* Ensure Leaflet tiles load properly */
  #parking-map .leaflet-container {
    background: #f8f9fa;
    height: 500px !important;
    width: 100% !important;
  }
  
  #parking-map .leaflet-tile-pane {
    opacity: 1 !important;
  }
  
  /* Custom parking markers accessibility */
  .custom-parking-marker {
    cursor: pointer !important;
  }
  .custom-parking-marker:focus {
    outline: 3px solid #0056b3;
    outline-offset: 2px;
  }
  .custom-parking-marker:hover {
    transform: scale(1.1);
    transition: transform 0.2s ease;
  }
  
  /* Map Legend */
  .map-legend { display: flex; justify-content: center; gap: 2rem; margin: 1rem 0; flex-wrap: wrap; }
  .legend-item { display: flex; align-items: center; gap: 0.5rem; font-size: 0.95rem; }
  .legend-marker { width: 24px; height: 24px; border-radius: 50%; display: inline-block; border: 2px solid #fff; box-shadow: 0 2px 4px rgba(0,0,0,0.3); }
  
  /* Clickable legend items */
  .legend-item.clickable {
    cursor: pointer;
    padding: 0.5rem;
    border-radius: 8px;
    transition: background-color 0.2s, transform 0.1s;
    border: 1px solid transparent;
  }
  .legend-item.clickable:hover {
    background-color: #e8f4f8;
    transform: translateY(-1px);
    border-color: #0056b3;
    box-shadow: 0 2px 6px rgba(0,0,0,0.15);
  }
  .legend-item.clickable:active {
    transform: translateY(0);
  }
  .legend-marker.premium { background-color: #007bff; }
  .legend-marker.standard { background-color: #f39c12; }
  .legend-marker.rv { background-color: #9c27b0; }
  .legend-marker.free { background-color: #27ae60; }
  
  /* Legend descriptions */
  .legend-descriptions { margin-top: 1rem; }
  .legend-desc { font-size: 0.9rem; color: #444; margin-bottom: 0.5rem; line-height: 1.4; }
  .legend-desc strong { color: #333; }
  
  /* All-Day Parking Notice */
  .parking-notice {
    background: linear-gradient(135deg, #28a745, #20c997);
    border-radius: 12px;
    padding: 1.5rem;
    margin: 1.5rem auto;
    max-width: 600px;
    box-shadow: 0 4px 12px rgba(40, 167, 69, 0.3);
    border: 2px solid rgba(255, 255, 255, 0.2);
  }
  .notice-content {
    display: flex;
    align-items: center;
    gap: 1rem;
    color: white;
  }
  .notice-icon {
    font-size: 2.5rem;
    color: white;
    flex-shrink: 0;
    filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
  }
  .notice-text h3 {
    margin: 0 0 0.5rem 0;
    font-size: 1.3rem;
    font-weight: 700;
    color: white;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
  }
  .notice-text p {
    margin: 0;
    font-size: 1rem;
    line-height: 1.5;
    color: rgba(255, 255, 255, 0.95);
    text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
  }
  
  /* Clickable legend descriptions */
  .legend-desc.clickable { 
    cursor: pointer; 
    padding: 0.5rem; 
    border-radius: 5px; 
    transition: background-color 0.2s, transform 0.1s;
    border: 1px solid transparent;
  }
  .legend-desc.clickable:hover { 
    background-color: #e8f4f8; 
    transform: translateY(-1px);
    border-color: #0056b3;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  }
  .legend-desc.clickable:active {
    transform: translateY(0);
  }
  
  /* Dark mode for map elements */
  body.dark-mode .map-section { background: #1a1a1a; }
  body.dark-mode .map-header h2 { color: var(--text-color); }
  body.dark-mode .map-header p { color: var(--light-text-color); }
  body.dark-mode #parking-map { border-color: rgba(255,255,255,0.2); }
  body.dark-mode .legend-item { color: var(--text-color); }
  body.dark-mode .legend-marker { border-color: rgba(255,255,255,0.8); }
  body.dark-mode .legend-desc { color: var(--light-text-color); }
  body.dark-mode .legend-desc strong { color: var(--text-color); }
  body.dark-mode .legend-desc.clickable:hover { 
    background-color: rgba(255,255,255,0.1); 
    border-color: #4da3ff;
  }
  body.dark-mode .legend-item.clickable:hover {
    background-color: rgba(255,255,255,0.1);
    border-color: #4da3ff;
  }
  
  /* Dark mode for parking notice */
  body.dark-mode .parking-notice {
    background: linear-gradient(135deg, #1b5e20, #00695c);
    border-color: rgba(255,255,255,0.3);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
  }
  
  /* Mobile responsive map */
  @media (max-width: 768px) {
    #parking-map { height: 400px !important; }
    .map-legend { gap: 1rem; }
    .legend-item { font-size: 0.9rem; }
    
    /* Mobile responsive parking notice */
    .parking-notice { 
      margin: 1rem; 
      padding: 1rem; 
    }
    .notice-content { 
      flex-direction: column; 
      text-align: center; 
      gap: 0.75rem; 
    }
    .notice-icon { 
      font-size: 2rem; 
    }
    .notice-text h3 { 
      font-size: 1.1rem; 
    }
    .notice-text p { 
      font-size: 0.95rem; 
    }
  }
  .fa-bars::before { content: "\f0c9"; }
  .fa-times::before { content: "\f00d"; }
  .fa-moon::before { content: "\f186"; }
  .fa-sun::before { content: "\f185"; }
  
  /* Desktop navigation in mobile */
  @media (min-width: 769px) {
    .nav-wrapper { display: flex !important; position: static !important; transform: none !important; background: transparent !important; width: auto !important; height: auto !important; padding: 0 !important; box-shadow: none !important; }
    .nav-links { flex-direction: row !important; }
    .nav-links a { color: var(--gray-800) !important; }
  }

  @media (max-width: 768px) {
    .mobile-menu-btn {
      display: block;
      position: absolute;
      right: 70px;
      top: 50%;
      transform: translateY(-50%);
      z-index: 1002;
    }
    
    /* Mobile menu container */
    .nav-wrapper {
      position: fixed;
      top: var(--header-height);
      right: -100%;
      width: 100%;
      height: calc(100vh - var(--header-height));
      background-color: var(--primary-color);
      transition: right 0.3s ease, visibility 0.3s ease;
      z-index: 1000;
      overflow-y: auto;
      visibility: hidden;
      margin-left: 0;
      padding: 20px 5px 50px;
      display: flex;
      justify-content: center;
      align-items: flex-start;
      box-sizing: border-box;
    }
    
    .nav-wrapper.active {
      right: 0;
      visibility: visible;
    }
    
    /* Navigation links container */
    .nav-links {
      display: flex;
      flex-direction: column;
      padding: 0;
      gap: 0;
      width: 100%;
      max-width: 250px;
      align-items: center;
      text-align: center;
      margin: 0 auto;
      box-sizing: border-box;
    }
    
    /* Navigation items */
    .nav-links > li {
      width: 100%;
      position: relative;
      margin: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      box-sizing: border-box;
    }
    
    /* All navigation links */
    .nav-links > li > a,
    .dropdown > a,
    .dropdown-content a {
      font-size: 0.9rem;
      padding: 0.8rem 0.3rem;
      display: flex;
      justify-content: center;
      align-items: center;
      width: 100%;
      color: var(--light-text-color);
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      transition: background-color 0.3s ease, color 0.3s ease;
      text-align: center;
      box-sizing: border-box;
      word-break: keep-all;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      gap: 4px;
    }
    
    /* Dropdown specific styles */
    .dropdown {
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    
    .dropdown > a {
      justify-content: center;
      width: 100%;
      position: relative;
    }
    
    .dropdown > a i.fa-caret-down {
      position: relative;
      right: auto;
      top: auto;
      transform: none;
      margin-left: 3px;
      transition: transform 0.3s ease;
      font-size: 0.75rem;
    }
    
    .dropdown-content {
      position: static;
      width: 100%;
      max-width: 100%;
      background-color: white;
      padding: 0;
      box-shadow: none;
      transform: none;
      opacity: 1;
      border: none;
      border-radius: 0;
      margin-top: 0;
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease;
      visibility: visible;
      text-align: center;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    
    .dropdown-content li {
      width: 100%;
      display: flex;
      justify-content: center;
      box-sizing: border-box;
    }
    
    .dropdown-content a {
      padding: 0.8rem 0.3rem;
      font-size: 0.85rem;
      color: var(--text-color) !important;
      border-bottom: 1px solid #e1e1e1;
    }
    
    .dropdown.active .dropdown-content {
      max-height: 500px;
    }
    
    .dropdown.active > a i.fa-caret-down {
      transform: rotate(180deg);
    }
    
    /* Hover and active states */
    .nav-links > li > a:hover,
    .dropdown > a:hover {
      background-color: rgba(255, 255, 255, 0.1);
    }
    
    .dropdown-content a:hover {
      background-color: #f8f9fa;
      color: var(--accent-color) !important;
    }
    
    .nav-links > li > a.active,
    .dropdown > a.active {
      font-weight: 600;
      color: white;
      background-color: rgba(255, 255, 255, 0.2);
    }
    
    .dropdown-content a.active {
      font-weight: 600;
      color: var(--accent-color) !important;
      background-color: #f8f9fa;
    }
    
    .mobile-close-btn { display: block; }
    /* Mobile hero optimization - now handled by critical CSS media queries above */
    .hero-section, .parking-hero { padding: 2rem 0; height: auto; min-height: 50vh; contain: layout style; z-index: 1; }
    .hero-content { height: auto; padding: 0 1rem; display: flex; flex-direction: column; justify-content: center; align-items: center; }
    .hero-icon { display: none; } /* Hide icon on mobile to improve LCP */
    .highlight-badges { flex-direction: column; gap: 0.5rem; align-items: center; min-height: auto; height: auto; margin-top: 1rem; margin-bottom: 0; }
    .hero-section p, .parking-hero p { height: auto; min-height: auto; font-size: 1.1rem; margin-bottom: 1rem; }
    .badge { height: 40px; font-size: 0.9rem; padding: 0.5rem 1rem; }
    .badge-price, .badge-season, .badge-hours { box-shadow: 0 2px 4px rgba(0,0,0,0.15); }
    .parking-map-image { max-width: 100%; }
    .tabs-section { margin: 1rem 0; position: relative; z-index: 10; background: white; }
    .tab-contents { min-height: auto; }
    .tab-content { padding: 0.5rem 0; }
    .modern-tabs { flex-wrap: wrap; gap: 0.5rem; }
    .tab-button { font-size: 0.9rem; padding: 0.5rem 1rem; }
    .responsive-video-wrapper { max-width: 100% !important; }
    /* Two column layout responsive */
    .two-column-layout { grid-template-columns: 1fr; gap: 2rem; }
    .left-column, .right-column { min-height: auto; }
    /* Tips grid responsive */
    .tips-grid { grid-template-columns: 1fr; gap: 1rem; }
    /* App buttons responsive */
    .app-buttons { flex-direction: column; }
    .app-store-btn { justify-content: center; }
    /* Citations tab responsive */
    .citation-action-cards { grid-template-columns: 1fr; gap: 1.5rem; }
    .payment-options { grid-template-columns: 1fr; gap: 1.5rem; }
    .styled-table { font-size: 0.9rem; }
    .styled-table th, .styled-table td { padding: 0.75rem 0.5rem; }
    .contest-step { flex-direction: column; text-align: center; }
    .step-number-large { margin: 0 auto 1rem; }
  }
  
  /* Additional hero styling beyond critical CSS */
  .badge { padding: 0.75rem 1.25rem; border-radius: 25px; color: white; font-size: 1rem; height: 48px; display: flex; align-items: center; white-space: nowrap; flex-shrink: 0; backdrop-filter: blur(10px); border: 2px solid rgba(255, 255, 255, 0.3); font-weight: 600; box-shadow: 0 4px 8px rgba(0,0,0,0.2); }
  .badge i { color: white !important; opacity: 1 !important; margin-right: 0.5rem; font-size: 1.1rem; filter: drop-shadow(0 0 2px rgba(0, 0, 0, 0.5)); }
  
  /* Colorful badge variants */
  .badge-price { background: linear-gradient(135deg, #28a745, #20c997); border-color: rgba(255,255,255,0.4); }
  .badge-season { background: linear-gradient(135deg, #fd7e14, #e83e8c); border-color: rgba(255,255,255,0.4); }
  .badge-hours { background: linear-gradient(135deg, #6f42c1, #6610f2); border-color: rgba(255,255,255,0.4); }
  
  .highlight-badges { display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap; margin-top: 2rem; min-height: 52px; contain: layout; width: 100%; }
  
  /* Tab and content containers */
  .tabs-section { margin: 2rem 0; position: relative; z-index: 10; background: white; }
  .container { max-width: 1200px; margin: 0 auto; padding: 0 2rem; }
</style>

<!-- Load essential CSS synchronously, defer non-critical -->
<link rel="stylesheet" href="css/base/variables.css">
<link rel="stylesheet" href="css/base/reset.css">
<link rel="stylesheet" href="css/layout/footer.css">
<link rel="stylesheet" href="css/components/buttons.css">
<link rel="stylesheet" href="css/components/cards.css">
<link rel="stylesheet" href="css/components/tabs.css">
<link rel="stylesheet" href="css/pages/parking.css">

<!-- Load Font Awesome and non-critical CSS after -->
<script>
window.addEventListener('DOMContentLoaded', function() {
  const fa = document.createElement('link');
  fa.rel = 'stylesheet';
  fa.href = 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css';
  document.head.appendChild(fa);
  
  // Load Leaflet CSS
  const leafletCSS = document.createElement('link');
  leafletCSS.rel = 'stylesheet';
  leafletCSS.href = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.css';
  leafletCSS.integrity = 'sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=';
  leafletCSS.crossOrigin = '';
  document.head.appendChild(leafletCSS);
});
</script>

<!-- Minimal Critical CSS for immediate hero render -->
<style>
  /* Only essential variables */
  :root {
    --header-height: 80px;
    --primary-color-light: #2a4a7a;
    --primary-color-dark: #1a2b4a;
  }
  
  /* Critical styles for immediate render */
  * { box-sizing: border-box; }
  body { margin: 0; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif; background: #f8f9fa; }
  .header { position: fixed; top: 0; left: 0; width: 100%; z-index: 1000; height: 80px; background: white; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
  .hero-section, .parking-hero { 
    margin-top: 80px; 
    padding: 4rem 0 3rem; 
    background: radial-gradient(ellipse at center, #2a4a7a 0%, #1a2b4a 100%); 
    color: white; 
    text-align: center; 
    height: 420px; 
    display: flex; 
    align-items: center;
  }
  .hero-content { 
    max-width: 900px; 
    margin: 0 auto; 
    padding: 0 2rem; 
    width: 100%; 
    height: 320px; 
    display: flex; 
    flex-direction: column; 
    justify-content: center; 
    align-items: center; 
  }
  h1 { 
    font-size: 4rem; 
    font-weight: 800; 
    margin: 0 0 1.5rem 0; 
    line-height: 1.1; 
    font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Segoe UI", system-ui, sans-serif; 
    color: white !important; 
    text-shadow: 2px 2px 8px rgba(0, 0, 0, 0.7); 
    letter-spacing: -0.5px;
  }
  .hero-section p, .parking-hero p { margin: 0; color: rgba(255, 255, 255, 0.95); font-size: 1.4rem; opacity: 1; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); }
  p { margin: 0.5rem 0; color: #333; }
  .container { max-width: 1200px; margin: 0 auto; padding: 0 2rem; }
  .tab-content { display: none; }
  .tab-content.active { display: block; }
  .tab-button { background: #f8f9fa; color: #333; padding: 0.75rem 1.5rem; border: none; cursor: pointer; }
  .tab-button.active { background: #0056b3; color: white; }
  h2, h3 { color: #333; margin: 1rem 0; }
  ul, ol { margin: 1rem 0; color: #333; }
  li { color: #333; }
  .info-card { background: white; padding: 1.5rem; margin: 1rem 0; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
  .btn { display: inline-block; padding: 0.75rem 1.5rem; background: #0056b3; color: white; text-decoration: none; border-radius: 5px; }
  
  /* Dark mode support */
  body.dark-mode { background: #1a1a1a; color: #e0e0e0; }
  body.dark-mode .tabs-section { background: #1a1a1a; }
  body.dark-mode .tab-button { background: #333; color: #e0e0e0; }
  body.dark-mode .tab-button.active { background: #0056b3; color: white; }
  body.dark-mode .info-card { background: #2a2a2a; color: #e0e0e0; }
  body.dark-mode h2, body.dark-mode h3, body.dark-mode p, body.dark-mode li { color: #e0e0e0; }
  
  /* Mobile only */
  @media (max-width: 768px) {
    .hero-section, .parking-hero { padding: 2rem 0; height: auto; min-height: 50vh; }
    .hero-content { height: auto; padding: 0 1rem; }
    h1 { font-size: 3rem; }
  }
  
  @media (max-width: 480px) {
    h1 { font-size: 2rem; }
  }
</style>

<!-- Lazy load Leaflet CSS only when needed -->
<style id="leaflet-placeholder">.leaflet-container { display: none; }</style>

<!-- Defer non-critical JS -->
<script src="darkmode.js" defer></script>
<script src="script.js" defer></script>
<meta content="#ffffff" id="theme-color" name="theme-color"/>
<script src="theme-init.js" defer></script>
</head>
<body>
<a class="skip-to-main" href="#main-content">
        Skip to main content
    </a>
<div class="scroll-progress"></div>
<header class="header">
<nav class="main-nav">
<a class="logo-link" href="index.html">
<img alt="Bar Harbor Police Department Logo" class="logo" src="images/branding/logo.png" width="192" height="262"/>
</a>
<div class="nav-wrapper" id="nav-wrapper">
<ul class="nav-links">
<li><a href="index.html"><i class="fas fa-home"></i> Home</a></li>
<li class="dropdown">
<a class="active" href="#"><i class="fas fa-building"></i> Divisions <i class="fas fa-caret-down"></i></a>
<ul class="dropdown-content">
<li>
<a href="patrol-division.html">
<i class="fas fa-shield-alt"></i> Patrol Division
                                </a>
</li>
<li><a href="harbor-master-division.html"><i class="fas fa-ship"></i> Harbor Master</a></li>
<li><a class="active" href="bar-harbor-parking.html"><i class="fas fa-parking"></i> Parking Enforcement</a></li>
<li><a href="admin.html"><i class="fas fa-users"></i> Administrative Services</a></li>
<li><a href="animalcontrol.html"><i class="fas fa-paw"></i> Animal Control</a></li>
<li><a href="mentalhealth.html"><i class="fas fa-heart"></i> Mental Health Unit</a></li>
</ul>
</li>
<li class="dropdown">
<a href="#"><i class="fas fa-hands-helping"></i> Programs <i class="fas fa-caret-down"></i></a>
<ul class="dropdown-content">
<li><a href="good-morning-program.html"><i class="fas fa-sun"></i> Good Morning Program</a></li>
<li><a href="community-outreach.html"><i class="fas fa-heart"></i> Community Outreach</a></li>
</ul>
</li>
<li class="dropdown">
<a href="#"><i class="fas fa-user-tie"></i> Recruitment <i class="fas fa-caret-down"></i></a>
<ul class="dropdown-content">
<li><a href="bhmdrec.html"><i class="fas fa-briefcase"></i> Career Opportunities</a></li>
<li><a href="application-process.html"><i class="fas fa-file-alt"></i> Application Process</a></li>
<li><a href="benefits.html"><i class="fas fa-medal"></i> Benefits & Salary</a></li>
<li><a href="academy-training.html"><i class="fas fa-chalkboard-teacher"></i> Academy Training</a></li>
</ul>
</li>
<li><a href="forms.html"><i class="fas fa-file-alt"></i> Forms</a></li>
<li><a href="faq.html"><i class="fas fa-question-circle"></i> FAQ</a></li>
<li><a href="events.html"><i class="fas fa-calendar-alt"></i> Events</a></li>
<li><a href="contact.html"><i class="fas fa-envelope"></i> Contact</a></li>
</ul>
</div>
<!-- Mobile Menu Button -->
<button aria-label="Toggle navigation menu" class="mobile-menu-btn" aria-expanded="false" aria-controls="nav-wrapper">
<i class="fas fa-bars" aria-hidden="true"></i>
<span class="sr-only">Menu</span>
</button>
<button aria-label="Toggle dark mode" class="dark-mode-toggle" id="darkModeToggle" aria-pressed="false">
<i class="fas fa-moon" aria-hidden="true"></i>
<i class="fas fa-sun" aria-hidden="true"></i>
<span class="sr-only">Dark mode</span>
</button>
</nav>
</header>
<main class="main-content" id="main-content">
<!-- Hero Section -->
<section class="hero-section parking-hero">
<div class="hero-content">
<i class="fas fa-parking hero-icon" aria-hidden="true"></i>
<h1>Bar Harbor Parking<br/>Services & Enforcement</h1>
<p>Convenient, efficient parking solutions for Bar Harbor</p>
<div class="highlight-badges">
<span class="badge badge-price"><i class="fas fa-money-bill" aria-hidden="true"></i> $2.00 - $4.00/hour</span>
<span class="badge badge-season"><i class="fas fa-calendar" aria-hidden="true"></i> May 15 - Oct 30</span>
<span class="badge badge-hours"><i class="fas fa-clock" aria-hidden="true"></i> 8 AM - 9 PM</span>
</div>
</div>
</section>

<!-- Interactive Parking Map Section -->
<section class="map-section">
<div class="container">
    <div class="map-header">
        <h2><i class="fas fa-map-marked-alt"></i> Interactive Parking Map</h2>
        <p>Click on any marker to view parking lot details, rates, and get directions</p>
    </div>
    
    <!-- Interactive Parking Map -->
    <div class="map-container mt-4 mb-4">
        <div id="parking-map" style="height: 500px; width: 100%; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);"></div>
        <div class="map-legend mt-3">
            <div class="legend-item clickable" data-parking-type="premium">
                <span class="legend-marker premium"></span>
                <span>Premium ($4.00/hr)</span>
            </div>
            <div class="legend-item clickable" data-parking-type="standard">
                <span class="legend-marker standard"></span>
                <span>Standard ($2.00/hr)</span>
            </div>
            <div class="legend-item clickable" data-parking-type="rv">
                <span class="legend-marker rv"></span>
                <span>RV Parking ($2.00/hr)</span>
            </div>
            <div class="legend-item clickable" data-parking-type="free">
                <span class="legend-marker free"></span>
                <span>Free Parking</span>
            </div>
        </div>
        <div class="legend-descriptions mt-2">
            <div class="legend-desc clickable" data-parking-type="premium">
                <strong>Premium:</strong> High-demand downtown locations with convenient access to shops, restaurants, and attractions
            </div>
            <div class="legend-desc clickable" data-parking-type="standard">
                <strong>Standard:</strong> Budget-friendly option with easy access to municipal services and EV charging
            </div>
            <div class="legend-desc clickable" data-parking-type="rv">
                <strong>RV Parking:</strong> Designated spaces for RVs and oversized vehicles with easy in/out access
            </div>
            <div class="legend-desc clickable" data-parking-type="free">
                <strong>Free:</strong> No charge parking areas, some outside downtown core
            </div>
        </div>
        <div class="mt-3" style="text-align: center;">
            <a class="btn btn-primary" download="Bar_Harbor_Parking_Map.jpg" href="images/divisions/parking/parkingmap.jpg">
                <i class="fas fa-map-marked-alt"></i> Download Map (JPG)
            </a>
            <a class="btn btn-primary ml-2" download="Bar_Harbor_Parking_Map.pdf" href="images/divisions/parking/parkingmap.pdf">
                <i class="fas fa-file-pdf"></i> Download Map (PDF)
            </a>
        </div>
        
        <!-- All-Day Parking Notice -->
        <div class="parking-notice mt-4">
            <div class="notice-content">
                <i class="fas fa-clock notice-icon"></i>
                <div class="notice-text">
                    <h3>ð¿ï¸ All-Day Parking Lots</h3>
                    <p>Pay for the time you need - up to all-day parking (13 hours, 8 AM - 9 PM). All lots support extended stays with flexible payment options!</p>
                </div>
            </div>
        </div>
    </div>
</div>
</section>

<!-- Tabs Section (Moved up) -->
<section class="tabs-section">
<div class="container">
<!-- Tab Hint Message -->
<div class="tab-hint">
<p><i class="fas fa-hand-pointer"></i> Click on any tab below to view detailed information</p>
</div>
<!-- Tab Buttons -->
<div class="modern-tabs">
<button class="tab-button active" data-tab="general">
<i class="fas fa-info-circle"></i>
<span>General Info</span>
</button>
<button class="tab-button" data-tab="kiosk">
<i class="fas fa-calculator"></i>
<span>Kiosk Guide</span>
</button>
<button class="tab-button" data-tab="parkmobile">
<i class="fas fa-mobile-alt"></i>
<span>ParkMobile</span>
</button>
<button class="tab-button" data-tab="lots">
<i class="fas fa-map-marker-alt"></i>
<span>Parking Lots</span>
</button>
<button class="tab-button" data-tab="citations">
<i class="fas fa-file-invoice"></i>
<span>Citations</span>
</button>
<button class="tab-button" data-tab="seasonal">
<i class="fas fa-calendar-alt"></i>
<span>Seasonal</span>
</button>
</div>
<!-- Tab Contents -->
<div class="tab-contents">
<!-- General Info Tab -->
<div class="tab-content active" id="general">
<div class="info-card">
<div class="card-header">
<i class="fas fa-info-circle"></i>
<h2>General Parking Information</h2>
</div>
<div class="card-body">
<p style="text-align: center; margin-bottom: 1.5rem; color: #444; font-size: 1.1rem;">Everything you need to know about parking in Bar Harbor. From permits to payment methods, find all essential parking information here.</p>

<div class="two-column-layout">
<div class="left-column">
<h3><i class="fas fa-list-ol"></i> Getting Started</h3>
<div class="steps-list">
<div class="step-item-vertical">
<div class="step-number-circle">1</div>
<div class="step-details">
<h4>Check Parking Zone</h4>
<p>Determine if you're in a paid parking area. Look for posted signs indicating rates and time limits.</p>
</div>
</div>
<div class="step-item-vertical">
<div class="step-number-circle">2</div>
<div class="step-details">
<h4>Choose Payment Method</h4>
<p>Use ParkMobile app, kiosk with card/tokens, or obtain a parking permit if eligible.</p>
</div>
</div>
<div class="step-item-vertical">
<div class="step-number-circle">3</div>
<div class="step-details">
<h4>Follow Time Limits</h4>
<p>Respect posted time limits and seasonal enforcement hours. Move your vehicle before time expires.</p>
</div>
</div>
<div class="step-item-vertical">
<div class="step-number-circle">4</div>
<div class="step-details">
<h4>Check for Extensions</h4>
<p>Use the ParkMobile app to extend your parking time remotely if needed.</p>
</div>
</div>
</div>

<div class="mt-4">
<h3><i class="fas fa-exclamation-triangle"></i> Important Rules</h3>
<div class="compact-rules-list">
<div class="compact-rule-item">
<i class="fas fa-wheelchair"></i>
<div>
<strong>Handicapped Parking</strong>
<span>Free in all paid/permit areas</span>
</div>
</div>
<div class="compact-rule-item">
<i class="fas fa-ban"></i>
<div>
<strong>Prohibited Areas</strong>
<span>No sidewalks or fire hydrants yellow marked no parking zones</span>
</div>
</div>
<div class="compact-rule-item">
<i class="fas fa-clock"></i>
<div>
<strong>72-Hour Limit</strong>
<span>Maximum parking duration</span>
</div>
</div>
<div class="compact-rule-item">
<i class="fas fa-sign"></i>
<div>
<strong>Posted Signs</strong>
<span>Always check restrictions</span>
</div>
</div>
<div class="compact-rule-item">
<i class="fas fa-flag-usa"></i>
<div>
<strong>July 4th Exception</strong>
<span>No permits required on July 4th</span>
</div>
</div>
</div>
</div>
</div>

<div class="right-column">
<h3><i class="fas fa-clock"></i> Parking Hours & Seasons</h3>
<div class="payment-info-box">
<div class="season-info">
<div class="season-badge-large">
<i class="fas fa-calendar-alt"></i>
<span>Enforcement: May 15 - October 30</span>
</div>
<ul class="payment-list">
<li><i class="fas fa-clock"></i> Monday - Saturday: 8:00 AM - 9:00 PM</li>
<li><i class="fas fa-sun"></i> Sunday: 12:00 PM - 9:00 PM</li>
<li><i class="fas fa-snowflake"></i> Off-season: Free parking</li>
<li><i class="fas fa-flag-usa"></i> July 4th: No fee parking</li>
</ul>
</div>
</div>

<div class="payment-info-box mt-3">
<h4><i class="fas fa-credit-card"></i> Payment Methods</h4>
<ul class="payment-list">
<li><i class="fas fa-mobile-alt"></i> ParkMobile App</li>
<li><i class="fas fa-credit-card"></i> Credit/Debit Cards</li>
<li><i class="fas fa-coins"></i> Parking Tokens ($1 each)</li>
<li><i class="fab fa-apple"></i> Apple Pay</li>
</ul>
</div>

<div class="payment-info-box mt-3">
<h4><i class="fas fa-id-card"></i> Available Permits</h4>
<ul class="payment-list">
<li><i class="fas fa-home"></i> Residential Permits</li>
<li><i class="fas fa-graduation-cap"></i> Student Permits</li>
<li><i class="fas fa-hard-hat"></i> Contractor Permits</li>
<li><i class="fas fa-ship"></i> Commercial Fishing</li>
</ul>
</div>
</div>
</div>

<div class="compact-section mt-4">
<h3><i class="fas fa-link"></i> Quick Links & Resources</h3>
<div class="compact-tips-grid">
<div class="tip-card link-card compact">
<i class="fas fa-clipboard-list"></i>
<a href="permitstepbystep.html"><strong>Permit Guide</strong><br><small>Step-by-step application</small></a>
</div>
<div class="tip-card link-card compact">
<i class="fas fa-question-circle"></i>
<a href="faq.html#parking-faq"><strong>Parking FAQs</strong><br><small>Common questions</small></a>
</div>
<div class="tip-card link-card compact">
<i class="fas fa-map-marked-alt"></i>
<a href="#parking-lots" class="tab-link" data-tab="lots"><strong>Parking Map</strong><br><small>Lots and zones</small></a>
</div>
<div class="tip-card link-card compact">
<i class="fas fa-download"></i>
<a href="images/divisions/parking/parkingmap.pdf" download="Bar_Harbor_Parking_Map.pdf"><strong>Download Map</strong><br><small>PDF format</small></a>
</div>
<div class="tip-card link-card compact">
<i class="fas fa-file-alt"></i>
<a href="pdf/Permit and Paid Parking Policy.pdf" download="Permit_and_Paid_Parking_Policy.pdf"><strong>Official Policy</strong><br><small>Complete regulations</small></a>
</div>
</div>
</div>

<div class="compact-section">
<h3><i class="fas fa-coins"></i> Parking Tokens</h3>
<div class="compact-token-layout">
<div class="token-packages-compact">
<div class="package-item-compact">
<i class="fas fa-coins"></i>
<div>
<strong>25 for $25</strong>
<span>Best value</span>
</div>
</div>
<div class="package-item-compact">
<i class="fas fa-coins"></i>
<div>
<strong>10 for $10</strong>
<span>Starter pack</span>
</div>
</div>
</div>
<div class="token-info-compact">
<p><strong>Purchase at:</strong> Municipal Building Finance Office</p>
<div class="compact-features">
<span><i class="fas fa-shield-alt"></i> Antimicrobial</span>
<span><i class="fas fa-university"></i> Student-designed</span>
<span><i class="fas fa-mountain"></i> Acadia artwork</span>
<span><i class="fas fa-lock"></i> Secure</span>
</div>
</div>
<div class="token-image-compact">
<img src="images/divisions/parking/tokens.png" alt="Bar Harbor Parking Tokens" width="300" height="168" loading="lazy" decoding="async">
</div>
</div>
</div>
</div>
</div>


</div>
</div>
</div>
<!-- Kiosk Guide Tab -->
<div class="tab-content" id="kiosk">
<div class="info-card">
<div class="card-header">
<i class="fas fa-calculator"></i>
<h2>How to Use Parking Kiosks</h2>
</div>
<div class="card-body">
<div class="two-column-layout">
<div class="left-column">
<h3><i class="fas fa-list-ol"></i> Quick Steps</h3>
<div class="steps-list">
<div class="step-item-vertical">
<div class="step-number-circle">1</div>
<div class="step-details">
<h4>Locate Your Kiosk</h4>
<p>Find the nearest kiosk to your parking space. Kiosks are located throughout downtown Bar Harbor.</p>
</div>
</div>
<div class="step-item-vertical">
<div class="step-number-circle">2</div>
<div class="step-details">
<h4>Enter License Plate</h4>
<p>Use the touchscreen to enter your vehicle's license plate number. Double-check for accuracy.</p>
</div>
</div>
<div class="step-item-vertical">
<div class="step-number-circle">3</div>
<div class="step-details">
<h4>Select Duration</h4>
<p>Choose how long you want to park. The screen will display the total cost.</p>
</div>
</div>
<div class="step-item-vertical">
<div class="step-number-circle">4</div>
<div class="step-details">
<h4>Make Payment</h4>
<p>Pay with credit/debit card, parking tokens, or Apple Pay. Collect your receipt if needed.</p>
</div>
</div>
</div>
</div>
<div class="right-column">
<h3><i class="fas fa-video"></i> Video Tutorial</h3>
<div class="video-container-enhanced">
<div class="responsive-video-wrapper">
<iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" frameborder="0" src="https://www.youtube.com/embed/Z7Xhllzl_04" title="How to Use Parking Kiosks" loading="lazy"></iframe>
</div>
<p class="video-caption">Watch this quick tutorial to see the kiosk payment process in action.</p>
</div>
<div class="payment-info-box">
<h4><i class="fas fa-credit-card"></i> Accepted Payment Methods</h4>
<ul class="payment-list">
<li><i class="fas fa-credit-card"></i> Credit/Debit Cards</li>
<li><i class="fas fa-coins"></i> Parking Tokens ($1 each)</li>
<li><i class="fab fa-apple"></i> Apple Pay</li>
<li><i class="fab fa-google"></i> Google Pay</li>
</ul>
</div>
</div>
</div>
<div class="kiosk-tips">
<h3><i class="fas fa-lightbulb"></i> Helpful Tips</h3>
<div class="tips-grid">
<div class="tip-card">
<i class="fas fa-receipt"></i>
<p>Keep your receipt - you may need it if you extend your parking time</p>
</div>
<div class="tip-card">
<i class="fas fa-clock"></i>
<p>You can add more time remotely using the ParkMobile app</p>
</div>
<div class="tip-card">
<i class="fas fa-exclamation-triangle"></i>
<p>Make sure to enter your license plate correctly to avoid citations</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<!-- ParkMobile Tab -->
<div class="tab-content" id="parkmobile">
<div class="info-card">
<div class="card-header">
<i class="fas fa-mobile-alt"></i>
<h2>ParkMobile App</h2>
</div>
<div class="card-body">
<p style="text-align: center; margin-bottom: 1.5rem; color: #444; font-size: 1.1rem;">Skip the kiosk and pay for parking right from your phone. ParkMobile makes parking in Bar Harbor quick, easy, and contactless.</p>
<div class="two-column-layout">
<div class="left-column">
<h3><i class="fas fa-list-ol"></i> Quick Start Guide</h3>
<div class="steps-list">
<div class="step-item-vertical">
<div class="step-number-circle">1</div>
<div class="step-details">
<h4>Download the App</h4>
<p>Get ParkMobile from the App Store or Google Play. It's free to download.</p>
</div>
</div>
<div class="step-item-vertical">
<div class="step-number-circle">2</div>
<div class="step-details">
<h4>Create Your Account</h4>
<p>Sign up with your email and add your vehicle's license plate number.</p>
</div>
</div>
<div class="step-item-vertical">
<div class="step-number-circle">3</div>
<div class="step-details">
<h4>Add Payment Method</h4>
<p>Link your credit/debit card or PayPal account for easy payments.</p>
</div>
</div>
<div class="step-item-vertical">
<div class="step-number-circle">4</div>
<div class="step-details">
<h4>Enter Zone & Park</h4>
<p>Find the zone number on signs, select your duration, and start parking!</p>
</div>
</div>
</div>
<div class="download-section" style="margin-top: 2rem;">
<h4><i class="fas fa-download"></i> Get the App</h4>
<div class="app-buttons" style="justify-content: flex-start;">
<a class="app-store-btn" href="https://apps.apple.com/us/app/parkmobile-park-pay-go/id365399299" target="_blank">
<i class="fab fa-apple"></i>
<div class="btn-text">
<span class="small-text">Download on the</span>
<span class="main-text">App Store</span>
</div>
</a>
<a class="app-store-btn google" href="https://play.google.com/store/apps/details?id=net.sharewire.parkmobilev2&hl=en_US&pli=1" target="_blank">
<i class="fab fa-google-play"></i>
<div class="btn-text">
<span class="small-text">Get it on</span>
<span class="main-text">Google Play</span>
</div>
</a>
</div>
<div class="mt-3" style="background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 8px; padding: 1rem; text-align: center;">
<p style="margin: 0; color: #856404; font-weight: 500;">
<i class="fas fa-info-circle" style="margin-right: 0.5rem;"></i>
<strong>Important Tip:</strong> Ensure that the vehicle you have selected in the app is the one currently in town.
</p>
</div>
</div>
</div>
<div class="right-column">
<h3><i class="fas fa-video"></i> Video Tutorial</h3>
<div class="video-container-enhanced">
<div class="responsive-video-wrapper">
<iframe allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" frameborder="0" src="https://www.youtube.com/embed/RBSYC32KC-8" title="How to Use ParkMobile" loading="lazy"></iframe>
</div>
<p class="video-caption">Learn how to use ParkMobile in Bar Harbor in under 2 minutes.</p>
</div>
<div class="feature-highlights" style="margin-top: 2rem;">
<h4><i class="fas fa-star"></i> Key Features</h4>
<ul class="feature-list">
<li><i class="fas fa-bell"></i> Get alerts 15 minutes before parking expires</li>
<li><i class="fas fa-clock"></i> Extend time remotely without returning to your car</li>
<li><i class="fas fa-history"></i> View all parking history and receipts</li>
<li><i class="fas fa-map-marker-alt"></i> Find available parking zones easily</li>
<li><i class="fas fa-shield-alt"></i> Secure payment processing</li>
</ul>
</div>
<div class="zone-info-box" style="margin-top: 1.5rem;">
<h4><i class="fas fa-info-circle"></i> Zone Information</h4>
<p>Look for green ParkMobile zone number signs posted throughout Bar Harbor parking areas. Each zone has a unique 4-digit code.</p>
</div>
</div>
</div>
<div class="kiosk-tips" style="margin-top: 2rem;">
<h3><i class="fas fa-lightbulb"></i> ParkMobile Tips</h3>
<div class="tips-grid">
<div class="tip-card">
<i class="fas fa-dollar-sign"></i>
<p>Small convenience fee applies per transaction - typically $0.35</p>
</div>
<div class="tip-card">
<i class="fas fa-car"></i>
<p>You can manage multiple vehicles in one account</p>
</div>
<div class="tip-card">
<i class="fas fa-mobile-alt"></i>
<p>Works in thousands of cities across the US</p>
</div>
</div>
</div>
</div>
</div>
</div>
<!-- Parking Lots Tab -->
<div class="tab-content" id="lots">
<div class="info-card">
<div class="card-header">
<i class="fas fa-map-marker-alt"></i>
<h2>Bar Harbor Parking Lots</h2>
</div>
<div class="card-body">
<p class="mb-4">Find information about our parking lots including locations and hourly rates.</p>

<!-- Map moved to main page above tabs -->

<!-- Parking Zones Organization -->
<div class="parking-zones-container">
    <!-- Premium Zone Section -->
    <div class="zone-section">
        <div class="zone-header">
            <h3><i class="fas fa-star"></i> Premium Parking Zone - $4.00/hour</h3>
            <p class="zone-description">High-demand downtown locations with convenient access to shops, restaurants, and attractions</p>
        </div>
        <div class="permit-cards">
            <!-- Casino Lot -->
            <div class="permit-card premium">
                <div class="permit-header">
                    <h5>Casino Lot</h5>
                    <span class="price-tag premium">$4.00/hr</span>
                </div>
                <ul>
                    <li><i class="fas fa-map-marker-alt"></i> Downtown center</li>
                    <li><i class="fas fa-walking"></i> Walk to shops & dining</li>
                    <li><i class="fas fa-clock"></i> High turnover area</li>
                </ul>
                <a class="btn btn-primary" href="https://maps.google.com/?q=44.389222,-68.209611" target="_blank">
                    <i class="fas fa-directions"></i> Get Directions
                </a>
            </div>

            <!-- Grants Park Lot -->
            <div class="permit-card premium">
                <div class="permit-header">
                    <h5>Grants Park Lot</h5>
                    <span class="price-tag premium">$4.00/hr</span>
                </div>
                <ul>
                    <li><i class="fas fa-tree"></i> Near Grants Park</li>
                    <li><i class="fas fa-camera"></i> Scenic area access</li>
                    <li><i class="fas fa-walking"></i> Tourist district</li>
                    <li><i class="fas fa-water"></i> Close to Shore Path - scenic walking trail with beautiful views of Frenchman Bay</li>
                </ul>
                <a class="btn btn-primary" href="https://maps.google.com/?q=44.388861,-68.201472" target="_blank">
                    <i class="fas fa-directions"></i> Get Directions
                </a>
            </div>

            <!-- Town Pier Lot -->
            <div class="permit-card premium">
                <div class="permit-header">
                    <h5>Town Pier Lot</h5>
                    <span class="price-tag premium">$4.00/hr</span>
                </div>
                <ul>
                    <li><i class="fas fa-anchor"></i> Waterfront access</li>
                    <li><i class="fas fa-ship"></i> Harbor views</li>
                    <li><i class="fas fa-camera"></i> Photo opportunities</li>
                </ul>
                <a class="btn btn-primary" href="https://maps.google.com/?q=44.391556,-68.204250" target="_blank">
                    <i class="fas fa-directions"></i> Get Directions
                </a>
            </div>

            <!-- Upper Central Lot -->
            <div class="permit-card premium">
                <div class="permit-header">
                    <h5>Upper Central Lot</h5>
                    <span class="price-tag premium">$4.00/hr</span>
                </div>
                <ul>
                    <li><i class="fas fa-building"></i> Central downtown</li>
                    <li><i class="fas fa-shopping-bag"></i> Shopping district</li>
                    <li><i class="fas fa-utensils"></i> Restaurant access</li>
                </ul>
                <a class="btn btn-primary" href="https://maps.google.com/?q=44.388667,-68.205139" target="_blank">
                    <i class="fas fa-directions"></i> Get Directions
                </a>
            </div>

            <!-- Rodick Street Lot -->
            <div class="permit-card premium">
                <div class="permit-header">
                    <h5>Rodick Street Lot</h5>
                    <span class="price-tag premium">$4.00/hr</span>
                </div>
                <ul>
                    <li><i class="fas fa-history"></i> Historic district</li>
                    <li><i class="fas fa-walking"></i> Walking distance downtown</li>
                    <li><i class="fas fa-info-circle"></i> Formerly Old PD Lot</li>
                </ul>
                <a class="btn btn-primary" href="https://maps.google.com/?q=44.388694,-68.206083" target="_blank">
                    <i class="fas fa-directions"></i> Get Directions
                </a>
            </div>
        </div>
    </div>

    <!-- Standard Zone Section -->
    <div class="zone-section">
        <div class="zone-header">
            <h3><i class="fas fa-building"></i> Standard Parking Zone - $2.00/hour</h3>
            <p class="zone-description">Budget-friendly option with easy access to municipal services</p>
        </div>
        <div class="permit-cards">
            <!-- Municipal Building Lot -->
            <div class="permit-card standard">
                <div class="permit-header">
                    <h5>Municipal Building Lot</h5>
                    <span class="price-tag standard">$2.00/hr</span>
                </div>
                <ul>
                    <li><i class="fas fa-landmark"></i> Near Town Hall</li>
                    <li><i class="fas fa-dollar-sign"></i> Most affordable rate</li>
                    <li><i class="fas fa-file-alt"></i> Municipal services access</li>
                </ul>
                <a class="btn btn-primary" href="https://maps.google.com/?q=44.389111,-68.210389" target="_blank">
                    <i class="fas fa-directions"></i> Get Directions
                </a>
            </div>

            <!-- Athletic Field (EV Chargers) -->
            <div class="permit-card standard">
                <div class="permit-header">
                    <h5>Athletic Field <span class="ev-badge">EV Charging</span></h5>
                    <span class="price-tag standard">$2.00/hr</span>
                </div>
                <ul>
                    <li><i class="fas fa-charging-station"></i> EV charging stations</li>
                    <li><i class="fas fa-running"></i> Near athletic facilities</li>
                    <li><i class="fas fa-leaf"></i> Eco-friendly option</li>
                </ul>
                <a class="btn btn-primary" href="https://maps.google.com/?q=44.381944,-68.204778" target="_blank">
                    <i class="fas fa-directions"></i> Get Directions
                </a>
            </div>

            <!-- RV Parking -->
            <div class="permit-card standard">
                <div class="permit-header">
                    <h5>RV Parking <span class="rv-badge">Large Vehicles</span></h5>
                    <span class="price-tag standard">$2.00/hr</span>
                </div>
                <ul>
                    <li><i class="fas fa-truck"></i> Designated RV spaces</li>
                    <li><i class="fas fa-ruler-horizontal"></i> Oversized vehicle friendly</li>
                    <li><i class="fas fa-route"></i> Easy in/out access</li>
                </ul>
                <a class="btn btn-primary" href="https://maps.google.com/?q=44.382472,-68.203000" target="_blank">
                    <i class="fas fa-directions"></i> Get Directions
                </a>
            </div>
        </div>
    </div>

</div>

<!-- Eden Street Lot -->
<div class="permit-card">
<div class="permit-header">
<h5>Eden Street Lot</h5>
<span class="price-tag">Free Parking</span>
</div>
<ul>
<li><i class="fas fa-ship"></i> Bar Harbor Ferry Terminal - 121 Eden Street</li>
<li><i class="fas fa-truck"></i> Allows RVs</li>
<li><i class="fas fa-map-marker-alt"></i> A little outside of town</li>
</ul>
<a class="btn btn-primary" href="https://maps.google.com/?q=44.397833,-68.227417" target="_blank">
<i class="fas fa-map-marked-alt"></i> View on Map
</a>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<!-- Citations Tab -->
<div class="tab-content" id="citations">
<div class="info-card">
<div class="card-header">
<i class="fas fa-file-invoice"></i>
<h2>Parking Citations & Violations</h2>
</div>
<div class="card-body">
<div class="citation-intro">
<p class="lead-text" style="text-align: center; margin-bottom: 2rem;">Received a parking citation? We've made it easy to pay or contest your ticket online or by mail.</p>
</div>

<div class="citation-grid">
<!-- Quick Actions -->
<div class="citation-action-cards">
<div class="action-card primary-action">
<div class="action-icon">
<i class="fas fa-credit-card"></i>
</div>
<h3>Pay Your Citation</h3>
<p>Quick and secure online payment available 24/7</p>
<a class="btn btn-primary btn-lg" href="https://barharbor.citationportal.com" target="_blank">
<i class="fas fa-lock"></i> Pay Online Now
</a>
<div class="payment-note">
<i class="fas fa-info-circle"></i> Have your citation number ready
</div>
</div>

<div class="action-card">
<div class="action-icon">
<i class="fas fa-gavel"></i>
</div>
<h3>Contest a Citation</h3>
<p>Believe you received a citation in error? Contest it online</p>
<a class="btn btn-secondary" href="https://barharbor.citationportal.com" target="_blank">
<i class="fas fa-balance-scale"></i> Contest Citation
</a>
</div>
</div>

<!-- Early Payment Note -->
<div class="early-payment-note">
<p class="fine-note"><i class="fas fa-clock"></i> Early payment discount available for most violations</p>
</div>

<!-- Payment Methods -->
<div class="payment-methods-section">
<h3><i class="fas fa-money-check-alt"></i> Payment Methods</h3>
<div class="payment-options">
<div class="payment-method">
<div class="method-icon">
<i class="fas fa-globe"></i>
</div>
<h4>Online Payment</h4>
<p>Pay securely online 24/7 using credit/debit card</p>
<ul>
<li>Instant confirmation</li>
<li>Print receipt immediately</li>
<li>No processing fees</li>
</ul>
</div>
<div class="payment-method">
<div class="method-icon">
<i class="fas fa-envelope"></i>
</div>
<h4>Mail Payment</h4>
<p>Send check or money order to:</p>
<address>
<strong>Treasurer, Town of Bar Harbor</strong><br>
93 Cottage Street<br>
Bar Harbor, ME 04609
</address>
<p class="mail-note">Include citation number on check</p>
</div>
<div class="payment-method">
<div class="method-icon">
<i class="fas fa-building"></i>
</div>
<h4>In Person</h4>
<p>Pay at Town Hall Finance Office</p>
<ul>
<li>Monday-Friday: 8:30 AM - 4:30 PM</li>
<li>Cash, check, or card accepted</li>
<li>Immediate receipt provided</li>
</ul>
</div>
</div>
</div>

<!-- Contest Process -->
<div class="contest-section">
<h3><i class="fas fa-clipboard-list"></i> How to Contest a Citation</h3>
<div class="contest-steps">
<div class="contest-step">
<div class="step-number-large">1</div>
<div class="step-info">
<h4>Gather Information</h4>
<p>Have your citation number and any supporting evidence ready (photos, receipts, etc.)</p>
</div>
</div>
<div class="contest-step">
<div class="step-number-large">2</div>
<div class="step-info">
<h4>Submit Online</h4>
<p>Visit our citation portal and select "Contest Citation" option</p>
</div>
</div>
<div class="contest-step">
<div class="step-number-large">3</div>
<div class="step-info">
<h4>Provide Details</h4>
<p>Explain why you believe the citation was issued in error</p>
</div>
</div>
<div class="contest-step">
<div class="step-number-large">4</div>
<div class="step-info">
<h4>Await Review</h4>
<p>You'll receive a decision via email within 10 business days</p>
</div>
</div>
</div>
</div>

<!-- Important Information -->
<div class="citation-footer">
<div class="important-info">
<h4><i class="fas fa-exclamation-circle"></i> Important Information</h4>
<ul>
<li><strong>Payment Due:</strong> Within 30 days of citation date</li>
<li><strong>Additional Fee:</strong> After 30 days</li>
<li><strong>Questions?</strong> Call Parking Enforcement at (207) 288-1777</li>
<li><strong>Lost Citation?</strong> Look up by license plate at <a href="https://barharbor.citationportal.com">citation portal</a></li>
</ul>
</div>
</div>
</div>
</div>
</div>
</div>

<!-- Seasonal Tab -->
<div class="tab-content" id="seasonal">
    <!-- Seasonal Overview -->
    <div class="seasonal-hero">
        <div class="seasonal-hero-content">
            <h2><i class="fas fa-calendar-alt"></i> Year-Round Parking Guide</h2>
            <p class="seasonal-subtitle">Navigate Bar Harbor parking through every season with our comprehensive guide</p>
        </div>
    </div>

    <!-- Seasons Container -->
    <div class="seasons-container">
        <!-- Summer Season Card -->
        <div class="season-card summer-season">
            <div class="season-card-header">
                <div class="season-icon-container">
                    <i class="fas fa-sun season-icon"></i>
                </div>
                <div class="season-info">
                    <h3>Summer Season</h3>
                    <div class="season-dates">
                        <i class="fas fa-calendar"></i>
                        <span>May 15 - October 30</span>
                    </div>
                </div>
                <div class="season-status active">
                    <i class="fas fa-circle"></i> Peak Season
                </div>
            </div>
            <div class="season-card-body">
                <div class="rates-grid">
                    <div class="rate-item premium">
                        <div class="rate-icon">
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="rate-details">
                            <h4>Premium Zones</h4>
                            <div class="rate-price">$4.00/hour</div>
                            <p>Downtown & waterfront areas</p>
                        </div>
                    </div>
                    <div class="rate-item standard">
                        <div class="rate-icon">
                            <i class="fas fa-building"></i>
                        </div>
                        <div class="rate-details">
                            <h4>Standard Zones</h4>
                            <div class="rate-price">$2.00/hour</div>
                            <p>Municipal & residential areas</p>
                        </div>
                    </div>
                </div>
                <div class="hours-info">
                    <h4><i class="fas fa-clock"></i> Enforcement Hours</h4>
                    <div class="hours-grid">
                        <div class="hours-item">
                            <strong>Monday - Saturday</strong>
                            <span>8:00 AM - 9:00 PM</span>
                        </div>
                        <div class="hours-item">
                            <strong>Sunday</strong>
                            <span>12:00 PM - 9:00 PM</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Winter Season Card -->
        <div class="season-card winter-season">
            <div class="season-card-header">
                <div class="season-icon-container">
                    <i class="fas fa-snowflake season-icon"></i>
                </div>
                <div class="season-info">
                    <h3>Winter Season</h3>
                    <div class="season-dates">
                        <i class="fas fa-calendar"></i>
                        <span>November 1 - May 14</span>
                    </div>
                </div>
                <div class="season-status free">
                    <i class="fas fa-circle"></i> Free Parking
                </div>
            </div>
            <div class="season-card-body">
                <div class="winter-benefits">
                    <div class="benefit-item">
                        <div class="benefit-icon">
                            <i class="fas fa-gift"></i>
                        </div>
                        <div class="benefit-content">
                            <h4>Free Parking</h4>
                            <p>No meter enforcement throughout winter months</p>
                        </div>
                    </div>
                    <div class="benefit-item">
                        <div class="benefit-icon">
                            <i class="fas fa-snowplow"></i>
                        </div>
                        <div class="benefit-content">
                            <h4>Snow Removal Permits</h4>
                            <p>Get email alerts for parking restrictions during snow events</p>
                        </div>
                    </div>
                </div>
                <div class="winter-actions">
                    <a href="http://www.thepermitportal.com" class="btn btn-winter">
                        <i class="fas fa-bell"></i> Sign Up for Winter Alerts
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Contractor & Special Event Permits Section -->
    <div class="contractor-permits-section">
        <div class="permits-hero">
            <h3><i class="fas fa-hard-hat"></i> Contractor & Special Event Permits</h3>
            <p>Professional parking solutions for contractors, dumpsters, and special events</p>
        </div>
        <div class="permit-options-grid">
            <div class="permit-option">
                <div class="permit-option-header">
                    <h4>Non-Premium Areas</h4>
                    <div class="price-large">$24.00<span>/day</span></div>
                </div>
                <ul class="permit-features">
                    <li><i class="fas fa-check"></i> Contractor parking permit</li>
                    <li><i class="fas fa-check"></i> Dumpster space permit</li>
                    <li><i class="fas fa-check"></i> Special events permit</li>
                    <li><i class="fas fa-check"></i> Municipal & residential areas</li>
                </ul>
                <a href="http://www.thepermitportal.com" class="btn btn-primary btn-full">
                    <i class="fas fa-external-link-alt"></i> Apply for Non-Premium Permit
                </a>
            </div>
            <div class="permit-option premium-option">
                <div class="permit-option-header">
                    <h4>Premium Areas</h4>
                    <div class="price-large">$54.00<span>/day</span></div>
                </div>
                <ul class="permit-features">
                    <li><i class="fas fa-check"></i> Downtown locations</li>
                    <li><i class="fas fa-check"></i> Waterfront access</li>
                    <li><i class="fas fa-check"></i> High-traffic areas</li>
                    <li><i class="fas fa-check"></i> Tourist districts</li>
                </ul>
                <a href="http://www.thepermitportal.com" class="btn btn-primary btn-full">
                    <i class="fas fa-external-link-alt"></i> Apply for Premium Permit
                </a>
            </div>
        </div>
        <div class="permit-portal-info">
            <div class="portal-card">
                <div class="portal-left">
                    <img alt="QR Code for Permit Portal" class="qr-code" src="images/qr-codes/permit-qr.png" width="125" height="125" loading="lazy"/>
                </div>
                <div class="portal-right">
                    <h4><i class="fas fa-qrcode"></i> Quick Access to Permit Portal</h4>
                    <p>Scan the QR code with your phone or visit the portal directly for fast permit applications.</p>
                    <a href="http://www.thepermitportal.com" class="btn btn-outline">
                        <i class="fas fa-external-link-alt"></i> www.thepermitportal.com
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
    </div>
</section>

<!-- Parking Map section removed as it's now in the General Info tab -->
<!-- Info Cards section removed as its content is now in the General Info tab -->

<!-- Contact CTA -->
<section class="cta-section">
<div class="container">
<div class="cta-content">
<div class="cta-info">
<h2><i class="fas fa-headset"></i> Need Parking Assistance?</h2>
<p>Contact our Parking Services Division:</p>
<div class="contact-details">
<p><i class="fas fa-phone"></i> Parking Enforcement: (207) 288-1777</p>
<!-- Try different IDs -->
<a class="btn btn-primary" href="contact.html#scott-pinkham">
<i class="fas fa-envelope"></i> Contact Parking Manager
                            </a>
<!-- Alternative links if the above doesn't work -->
<!-- 
                            <a href="contact.html#sp" class="btn btn-primary">
                            <a href="contact.html#scott" class="btn btn-primary">
                            -->
</div>
</div>
</div>
</div>
</section>
</main>
<!-- Footer placeholder for footer-loader.js -->
<footer class="footer"></footer>

<!-- Lightbox Structure (REMOVED) -->
<!--
<div id="lightbox-overlay" class="lightbox-overlay">
    <span class="lightbox-close">Ã</span>
    <img class="lightbox-content" id="lightbox-image" src="#" alt="Enlarged Parking Map">
</div>
-->

<!-- Defer all non-critical JavaScript -->
<script src="js/parking-optimized.js" defer></script>
<script src="js/footer-loader.js" defer></script>
<!-- Defer Leaflet loading until user scrolls near footer -->
<!-- Parking Map Script -->
<script>
// Parking Lot Data with coordinates and details - Using exact coordinates from Get Directions links
const parkingLots = [
    // Premium Lots ($4.00/hr)
    {
        name: "Casino Lot",
        lat: 44.389222,
        lng: -68.209611,
        price: "$4.00/hr",
        type: "premium",
        description: "Downtown center with easy access to shops & dining",
        features: ["Downtown center", "Walk to shops & dining", "High turnover area"]
    },
    {
        name: "Grants Park Lot",
        lat: 44.388861,
        lng: -68.201472,
        price: "$4.00/hr",
        type: "premium",
        description: "Near Grants Park with scenic area access",
        features: ["Near Grants Park", "Scenic area access", "Tourist district", "Close to Shore Path - scenic walking trail"]
    },
    {
        name: "Town Pier Lot",
        lat: 44.391556,
        lng: -68.204250,
        price: "$4.00/hr",
        type: "premium",
        description: "Waterfront access with harbor views",
        features: ["Waterfront access", "Harbor views", "Photo opportunities"]
    },
    {
        name: "Upper Central Lot",
        lat: 44.388667,
        lng: -68.205139,
        price: "$4.00/hr",
        type: "premium",
        description: "Central downtown location",
        features: ["Central downtown", "Shopping district", "Restaurant access"]
    },
    {
        name: "Rodick Street Lot",
        lat: 44.388694,
        lng: -68.206083,
        price: "$4.00/hr",
        type: "premium",
        description: "Historic district parking",
        features: ["Historic district", "Walking distance downtown", "Formerly Old PD Lot"]
    },
    // Standard Lots ($2.00/hr)
    {
        name: "Municipal Building Lot",
        lat: 44.389111,
        lng: -68.210389,
        price: "$2.00/hr",
        type: "standard",
        description: "Near Town Hall with municipal services access",
        features: ["Near Town Hall", "Most affordable rate", "Municipal services access"]
    },
    {
        name: "Athletic Field (EV Charging)",
        lat: 44.381944,
        lng: -68.204778,
        price: "$2.00/hr",
        type: "standard",
        description: "EV charging stations and athletic facilities",
        features: ["EV charging stations", "Near athletic facilities", "Eco-friendly option"]
    },
    {
        name: "RV Parking",
        lat: 44.382472,
        lng: -68.203000,
        price: "$2.00/hr",
        type: "rv",
        description: "Designated RV and oversized vehicle parking",
        features: ["Designated RV spaces", "Oversized vehicle friendly", "Easy in/out access"]
    },
    // Free Parking
    {
        name: "Eden Street Lot (Ferry Terminal)",
        lat: 44.397833,
        lng: -68.227417,
        price: "Free",
        type: "free",
        description: "Bar Harbor Ferry Terminal parking",
        features: ["Bar Harbor Ferry Terminal - 121 Eden Street", "Allows RVs", "A little outside of town"]
    }
];

// Initialize parking map when parking lots tab is active
let parkingMap = null;
let parkingMapInitialized = false;

function initializeParkingMap() {
    console.log('initializeParkingMap called');
    console.log('parkingMapInitialized:', parkingMapInitialized);
    console.log('window.L available:', !!window.L);
    
    if (parkingMapInitialized) {
        console.log('Map already initialized');
        return;
    }
    
    if (!window.L) {
        console.log('Leaflet not available');
        return;
    }
    
    const mapContainer = document.getElementById('parking-map');
    console.log('Map container found:', !!mapContainer);
    if (!mapContainer) {
        console.log('No map container element found');
        return;
    }
    
    console.log('Initializing parking map...');
    parkingMapInitialized = true;
    
    try {
        // Create map centered on Bar Harbor
        parkingMap = L.map('parking-map').setView([44.3886, -68.2056], 15);
        console.log('Map object created successfully');
        
        // Add OpenStreetMap tiles with error handling
        const tileLayer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: 'Â© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
            maxZoom: 18,
            crossOrigin: true
        });
        
        tileLayer.on('loading', function() {
            console.log('Tiles started loading');
        });
        
        tileLayer.on('load', function() {
            console.log('Tiles finished loading');
        });
        
        tileLayer.on('tileerror', function(error) {
            console.error('Tile loading error:', error);
        });
        
        tileLayer.addTo(parkingMap);
        console.log('Tile layer added successfully');
    } catch (error) {
        console.error('Error creating map:', error);
        parkingMapInitialized = false;
        return;
    }
    
    // Define marker colors for each type
    const markerColors = {
        premium: '#007bff',
        standard: '#f39c12',
        rv: '#9c27b0',
        free: '#27ae60'
    };
    
    // Collect markers for bounds fitting
    const markers = [];
    
    // Add markers for each parking lot
    parkingLots.forEach(lot => {
        const markerColor = markerColors[lot.type];
        
        // Create custom marker HTML with better accessibility
        const markerHtml = `
            <div style="
                background-color: ${markerColor};
                width: 44px;
                height: 44px;
                border-radius: 50%;
                border: 3px solid white;
                box-shadow: 0 2px 8px rgba(0,0,0,0.4);
                display: flex;
                align-items: center;
                justify-content: center;
                color: white;
                font-weight: bold;
                font-size: 16px;
                text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
            " aria-label="${lot.name} - ${lot.price}">P</div>
        `;
        
        // Create marker icon with proper accessibility
        const customIcon = L.divIcon({
            html: markerHtml,
            iconSize: [44, 44],
            iconAnchor: [22, 22],
            popupAnchor: [0, -22],
            className: 'custom-parking-marker'
        });
        
        // Create popup content
        const popupContent = `
            <div style="min-width: 250px;">
                <h3 style="margin: 0 0 8px 0; color: ${markerColor}; font-size: 16px;">${lot.name}</h3>
                <p style="margin: 0 0 8px 0; font-weight: bold; font-size: 18px;">${lot.price}</p>
                <p style="margin: 0 0 12px 0; color: #444; font-size: 14px;">${lot.description}</p>
                <ul style="margin: 0 0 12px 0; padding-left: 20px; font-size: 13px;">
                    ${lot.features.map(feature => `<li>${feature}</li>`).join('')}
                </ul>
                <a href="https://maps.google.com/?q=${lot.lat},${lot.lng}" 
                   target="_blank" 
                   style="display: inline-block; background: #0056b3; color: white; padding: 6px 12px; text-decoration: none; border-radius: 4px; font-size: 13px;">
                    <i class="fas fa-directions"></i> Get Directions
                </a>
            </div>
        `;
        
        // Create and add marker to map
        const marker = L.marker([lot.lat, lot.lng], { icon: customIcon })
            .addTo(parkingMap)
            .bindPopup(popupContent);
            
        markers.push(marker);
    });
    
    // Fit map to show all markers
    let group = null;
    if (markers.length > 0) {
        group = new L.featureGroup(markers);
        parkingMap.fitBounds(group.getBounds().pad(0.1));
        console.log('Map bounds fitted to show all markers');
    }
    
    // Force map to recognize its container size with multiple attempts
    setTimeout(() => {
        if (parkingMap) {
            parkingMap.invalidateSize();
            console.log('Map size invalidated (first pass)');
        }
    }, 100);
    
    setTimeout(() => {
        if (parkingMap) {
            parkingMap.invalidateSize();
            console.log('Map size invalidated (second pass)');
        }
    }, 500);
    
    setTimeout(() => {
        if (parkingMap) {
            parkingMap.invalidateSize();
            if (group) {
                parkingMap.fitBounds(group.getBounds().pad(0.1));
                console.log('Map size invalidated and bounds refitted (third pass)');
            } else {
                console.log('Map size invalidated (third pass, no bounds to fit)');
            }
        }
    }, 1000);
    
    console.log('Parking map initialization complete');
    
    // Add click handlers for legend descriptions
    setupLegendClickHandlers();
}

// Function to set up clickable legend descriptions and items
function setupLegendClickHandlers() {
    // Handle legend description clicks
    const legendDescs = document.querySelectorAll('.legend-desc.clickable');
    legendDescs.forEach(desc => {
        desc.addEventListener('click', function() {
            const parkingType = this.getAttribute('data-parking-type');
            navigateToParkingType(parkingType);
        });
    });
    
    // Handle legend item clicks (colored markers)
    const legendItems = document.querySelectorAll('.legend-item.clickable');
    legendItems.forEach(item => {
        item.addEventListener('click', function() {
            const parkingType = this.getAttribute('data-parking-type');
            navigateToParkingType(parkingType);
        });
    });
    
    console.log('Legend click handlers set up for', legendDescs.length, 'descriptions and', legendItems.length, 'legend items');
}

// Function to navigate to specific parking type
function navigateToParkingType(type) {
    if (!parkingMap) {
        console.log('Map not initialized yet');
        return;
    }
    
    console.log('Navigating to parking type:', type);
    
    // Filter parking lots by type
    const lotsOfType = parkingLots.filter(lot => lot.type === type);
    
    if (lotsOfType.length === 0) {
        console.log('No parking lots found for type:', type);
        return;
    }
    
    // Create bounds for all lots of this type
    const bounds = L.latLngBounds();
    lotsOfType.forEach(lot => {
        bounds.extend([lot.lat, lot.lng]);
    });
    
    // Fit map to show all lots of this type
    if (lotsOfType.length === 1) {
        // If only one lot, center on it with appropriate zoom
        parkingMap.setView([lotsOfType[0].lat, lotsOfType[0].lng], 17);
        console.log('Centered on single', type, 'parking lot');
    } else {
        // If multiple lots, fit bounds with padding
        parkingMap.fitBounds(bounds, { padding: [20, 20] });
        console.log('Fitted bounds for', lotsOfType.length, type, 'parking lots');
    }
    
    // Add a subtle visual feedback
    const clickedDesc = document.querySelector(`[data-parking-type="${type}"]`);
    if (clickedDesc) {
        clickedDesc.style.backgroundColor = '#d4edda';
        setTimeout(() => {
            clickedDesc.style.backgroundColor = '';
        }, 1000);
    }
}

// Initialize map immediately when page loads (map is now on main page)
document.addEventListener('DOMContentLoaded', function() {
    console.log('Page loaded, initializing parking map...');
    
    // Small delay to ensure page is fully rendered
    setTimeout(() => {
        const mapContainer = document.getElementById('parking-map');
        console.log('Map container found:', !!mapContainer);
        
        if (mapContainer) {
            if (window.L && !parkingMapInitialized) {
                console.log('Leaflet available, initializing map');
                initializeParkingMap();
            } else if (!window.L) {
                console.log('Loading Leaflet library');
                loadParkingMapLeaflet();
            }
        } else {
            console.log('Map container not found');
        }
    }, 200);
});

function loadParkingMapLeaflet() {
    console.log('loadParkingMapLeaflet called');
    
    // Check if Leaflet is already loaded
    if (window.L) {
        console.log('Leaflet already available');
        initializeParkingMap();
        return;
    }
    
    // Check if there's a promise for leaflet loading
    if (window.leafletLoaded && typeof window.leafletLoaded.then === 'function') {
        console.log('Waiting for existing Leaflet promise');
        window.leafletLoaded.then(() => {
            initializeParkingMap();
        });
        return;
    }
    
    // Check if Leaflet is already being loaded
    if (document.querySelector('script[src*="leaflet"]')) {
        console.log('Leaflet script already loading, waiting...');
        const checkLeaflet = setInterval(() => {
            if (window.L) {
                clearInterval(checkLeaflet);
                initializeParkingMap();
            }
        }, 100);
        return;
    }
    
    console.log('Loading Leaflet CSS and JS');
    
    // Load Leaflet CSS
    const cssLink = document.createElement('link');
    cssLink.rel = 'stylesheet';
    cssLink.href = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.css';
    cssLink.integrity = 'sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=';
    cssLink.crossOrigin = '';
    document.head.appendChild(cssLink);
    
    // Load Leaflet JS
    const script = document.createElement('script');
    script.src = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.js';
    script.integrity = 'sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=';
    script.crossOrigin = '';
    script.onload = () => {
        console.log('Leaflet loaded successfully');
        window.leafletLoaded = Promise.resolve();
        initializeParkingMap();
    };
    script.onerror = (error) => {
        console.error('Failed to load Leaflet:', error);
    };
    document.body.appendChild(script);
}
</script>

<script>
// Optimized lazy loading with passive listeners and better performance
let leafletLoaded = false;
let scrolling = false;

const loadLeaflet = () => {
    if (!leafletLoaded && !document.querySelector('script[src*="leaflet"]')) {
        leafletLoaded = true;
        
        // Load Leaflet CSS first
        const cssLink = document.createElement('link');
        cssLink.rel = 'stylesheet';
        cssLink.href = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.css';
        document.head.appendChild(cssLink);
        
        // Then load the JS
        const script = document.createElement('script');
        script.src = 'https://unpkg.com/leaflet@1.9.4/dist/leaflet.js';
        script.onload = () => {
            window.leafletLoaded = Promise.resolve();
            if (window.initializeFooterMap) {
                window.initializeFooterMap();
            }
        };
        document.body.appendChild(script);
    }
};

// Use passive listeners for better scroll performance
const handleScroll = () => {
    if (!scrolling) {
        scrolling = true;
        requestAnimationFrame(() => {
            const footer = document.querySelector('footer');
            if (footer) {
                const footerTop = footer.getBoundingClientRect().top;
                if (footerTop < window.innerHeight + 200) {
                    loadLeaflet();
                }
            }
            scrolling = false;
        });
    }
};

// Add passive scroll listener
window.addEventListener('scroll', handleScroll, { passive: true });
</script>
</body>
</html>